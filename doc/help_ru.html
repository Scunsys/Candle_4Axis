<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <style>:root
{
    --background-color: #ffffff;
    --color: #000000;
    --font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", HelveticaNeue-Light, Ubuntu, "Droid Sans", sans-serif;
    --font-size: 13px;
    --font-weight: normal;
    --link-active-color: #006ab1;
    --link-color: #006ab1;
    --vscode-activityBar-background: #2c2c2c;
    --vscode-activityBar-dropBackground: rgba(255, 255, 255, 0.12);
    --vscode-activityBar-foreground: #ffffff;
    --vscode-activityBarBadge-background: #007acc;
    --vscode-activityBarBadge-foreground: #ffffff;
    --vscode-badge-background: #c4c4c4;
    --vscode-badge-foreground: #333333;
    --vscode-breadcrumb-activeSelectionForeground: #6c6c6c;
    --vscode-breadcrumb-focusForeground: #6c6c6c;
    --vscode-breadcrumb-foreground: rgba(108, 108, 108, 0.7);
    --vscode-breadcrumbPicker-background: #ececec;
    --vscode-button-background: #007acc;
    --vscode-button-foreground: #ffffff;
    --vscode-button-hoverBackground: #0062a3;
    --vscode-debugExceptionWidget-background: #f1dfde;
    --vscode-debugExceptionWidget-border: #a31515;
    --vscode-debugToolBar-background: #f3f3f3;
    --vscode-descriptionForeground: #717171;
    --vscode-diffEditor-insertedTextBackground: rgba(155, 185, 85, 0.2);
    --vscode-diffEditor-removedTextBackground: rgba(255, 0, 0, 0.2);
    --vscode-dropdown-background: #ffffff;
    --vscode-dropdown-border: #cecece;
    --vscode-editor-background: #ffffff;
    --vscode-editor-findMatchBackground: #a8ac94;
    --vscode-editor-findMatchHighlightBackground: rgba(234, 92, 0, 0.33);
    --vscode-editor-findRangeHighlightBackground: rgba(180, 180, 180, 0.3);
    --vscode-editor-font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", HelveticaNeue-Light, Ubuntu, "Droid Sans", sans-serif;
    --vscode-editor-font-size: 13px;
    --vscode-editor-font-weight: normal;
    --vscode-editor-foreground: #000000;
    --vscode-editor-hoverHighlightBackground: rgba(173, 214, 255, 0.15);
    --vscode-editor-inactiveSelectionBackground: #e5ebf1;
    --vscode-editor-lineHighlightBorder: #eeeeee;
    --vscode-editor-rangeHighlightBackground: rgba(253, 255, 0, 0.2);
    --vscode-editor-selectionBackground: #add6ff;
    --vscode-editor-selectionHighlightBackground: rgba(173, 214, 255, 0.3);
    --vscode-editor-wordHighlightBackground: rgba(87, 87, 87, 0.25);
    --vscode-editor-wordHighlightStrongBackground: rgba(14, 99, 156, 0.25);
    --vscode-editorActiveLineNumber-foreground: #0b216f;
    --vscode-editorBracketMatch-background: rgba(0, 100, 0, 0.1);
    --vscode-editorBracketMatch-border: #b9b9b9;
    --vscode-editorCodeLens-foreground: #999999;
    --vscode-editorCursor-foreground: #000000;
    --vscode-editorError-foreground: #d60a0a;
    --vscode-editorGroup-border: #e7e7e7;
    --vscode-editorGroup-dropBackground: rgba(38, 119, 203, 0.18);
    --vscode-editorGroupHeader-noTabsBackground: #ffffff;
    --vscode-editorGroupHeader-tabsBackground: #f3f3f3;
    --vscode-editorGutter-addedBackground: #81b88b;
    --vscode-editorGutter-background: #ffffff;
    --vscode-editorGutter-deletedBackground: #ca4b51;
    --vscode-editorGutter-modifiedBackground: #66afe0;
    --vscode-editorHint-foreground: #6c6c6c;
    --vscode-editorHoverWidget-background: #efeff2;
    --vscode-editorHoverWidget-border: #c8c8c8;
    --vscode-editorIndentGuide-activeBackground: #939393;
    --vscode-editorIndentGuide-background: #d3d3d3;
    --vscode-editorInfo-foreground: #008000;
    --vscode-editorLineNumber-activeForeground: #0b216f;
    --vscode-editorLineNumber-foreground: #237893;
    --vscode-editorLink-activeForeground: #0000ff;
    --vscode-editorMarkerNavigation-background: #ffffff;
    --vscode-editorMarkerNavigationError-background: #d60a0a;
    --vscode-editorMarkerNavigationInfo-background: #008000;
    --vscode-editorMarkerNavigationWarning-background: #117711;
    --vscode-editorOverviewRuler-addedForeground: rgba(0, 122, 204, 0.6);
    --vscode-editorOverviewRuler-border: rgba(127, 127, 127, 0.3);
    --vscode-editorOverviewRuler-bracketMatchForeground: #a0a0a0;
    --vscode-editorOverviewRuler-commonContentForeground: rgba(96, 96, 96, 0.4);
    --vscode-editorOverviewRuler-currentContentForeground: rgba(64, 200, 174, 0.5);
    --vscode-editorOverviewRuler-deletedForeground: rgba(0, 122, 204, 0.6);
    --vscode-editorOverviewRuler-errorForeground: rgba(255, 18, 18, 0.7);
    --vscode-editorOverviewRuler-findMatchForeground: rgba(246, 185, 77, 0.7);
    --vscode-editorOverviewRuler-incomingContentForeground: rgba(64, 166, 255, 0.5);
    --vscode-editorOverviewRuler-infoForeground: rgba(18, 18, 136, 0.7);
    --vscode-editorOverviewRuler-modifiedForeground: rgba(0, 122, 204, 0.6);
    --vscode-editorOverviewRuler-rangeHighlightForeground: rgba(0, 122, 204, 0.6);
    --vscode-editorOverviewRuler-selectionHighlightForeground: rgba(160, 160, 160, 0.8);
    --vscode-editorOverviewRuler-warningForeground: rgba(18, 136, 18, 0.7);
    --vscode-editorOverviewRuler-wordHighlightForeground: rgba(160, 160, 160, 0.8);
    --vscode-editorOverviewRuler-wordHighlightStrongForeground: rgba(192, 160, 192, 0.8);
    --vscode-editorPane-background: #ffffff;
    --vscode-editorRuler-foreground: #d3d3d3;
    --vscode-editorSuggestWidget-background: #f3f3f3;
    --vscode-editorSuggestWidget-border: #c8c8c8;
    --vscode-editorSuggestWidget-foreground: #000000;
    --vscode-editorSuggestWidget-highlightForeground: #007acc;
    --vscode-editorSuggestWidget-selectedBackground: #dff0ff;
    --vscode-editorUnnecessaryCode-opacity: rgba(0, 0, 0, 0.47);
    --vscode-editorWarning-foreground: #117711;
    --vscode-editorWhitespace-foreground: rgba(51, 51, 51, 0.2);
    --vscode-editorWidget-background: #efeff2;
    --vscode-editorWidget-border: #c8c8c8;
    --vscode-errorForeground: #a1260d;
    --vscode-extensionButton-prominentBackground: #327e36;
    --vscode-extensionButton-prominentForeground: #ffffff;
    --vscode-extensionButton-prominentHoverBackground: #28632b;
    --vscode-focusBorder: rgba(0, 122, 204, 0.4);
    --vscode-foreground: #616161;
    --vscode-gitDecoration-addedResourceForeground: #587c0c;
    --vscode-gitDecoration-conflictingResourceForeground: #6c6cc4;
    --vscode-gitDecoration-deletedResourceForeground: #ad0707;
    --vscode-gitDecoration-ignoredResourceForeground: #8e8e90;
    --vscode-gitDecoration-modifiedResourceForeground: #895503;
    --vscode-gitDecoration-submoduleResourceForeground: #1258a7;
    --vscode-gitDecoration-untrackedResourceForeground: #018101;
    --vscode-input-background: #ffffff;
    --vscode-input-foreground: #616161;
    --vscode-input-placeholderForeground: #767676;
    --vscode-inputOption-activeBorder: #007acc;
    --vscode-inputValidation-errorBackground: #f2dede;
    --vscode-inputValidation-errorBorder: #be1100;
    --vscode-inputValidation-infoBackground: #d6ecf2;
    --vscode-inputValidation-infoBorder: #007acc;
    --vscode-inputValidation-warningBackground: #f6f5d2;
    --vscode-inputValidation-warningBorder: #b89500;
    --vscode-list-activeSelectionBackground: #2477ce;
    --vscode-list-activeSelectionForeground: #ffffff;
    --vscode-list-dropBackground: #dff0ff;
    --vscode-list-errorForeground: #b01011;
    --vscode-list-focusBackground: #dff0ff;
    --vscode-list-highlightForeground: #007acc;
    --vscode-list-hoverBackground: #e8e8e8;
    --vscode-list-inactiveFocusBackground: #d8dae6;
    --vscode-list-inactiveSelectionBackground: #dddfea;
    --vscode-list-invalidItemForeground: #b89500;
    --vscode-list-warningForeground: #117711;
    --vscode-menu-background: #f3f3f3;
    --vscode-menu-selectionBackground: #2477ce;
    --vscode-menu-selectionForeground: #ffffff;
    --vscode-menubar-selectionBackground: rgba(0, 0, 0, 0.1);
    --vscode-menubar-selectionForeground: #333333;
    --vscode-merge-commonContentBackground: rgba(96, 96, 96, 0.16);
    --vscode-merge-commonHeaderBackground: rgba(96, 96, 96, 0.4);
    --vscode-merge-currentContentBackground: rgba(64, 200, 174, 0.2);
    --vscode-merge-currentHeaderBackground: rgba(64, 200, 174, 0.5);
    --vscode-merge-incomingContentBackground: rgba(64, 166, 255, 0.2);
    --vscode-merge-incomingHeaderBackground: rgba(64, 166, 255, 0.5);
    --vscode-notificationCenterHeader-background: #e2e2e7;
    --vscode-notificationLink-foreground: #006ab1;
    --vscode-notifications-background: #efeff2;
    --vscode-notifications-border: #e2e2e7;
    --vscode-panel-background: #ffffff;
    --vscode-panel-border: rgba(128, 128, 128, 0.35);
    --vscode-panel-dropBackground: rgba(38, 119, 203, 0.18);
    --vscode-panelTitle-activeBorder: rgba(128, 128, 128, 0.35);
    --vscode-panelTitle-activeForeground: #424242;
    --vscode-panelTitle-inactiveForeground: rgba(66, 66, 66, 0.75);
    --vscode-peekView-border: #007acc;
    --vscode-peekViewEditor-background: #f2f8fc;
    --vscode-peekViewEditor-matchHighlightBackground: rgba(245, 216, 2, 0.87);
    --vscode-peekViewEditorGutter-background: #f2f8fc;
    --vscode-peekViewResult-background: #f3f3f3;
    --vscode-peekViewResult-fileForeground: #1e1e1e;
    --vscode-peekViewResult-lineForeground: #646465;
    --vscode-peekViewResult-matchHighlightBackground: rgba(234, 92, 0, 0.3);
    --vscode-peekViewResult-selectionBackground: rgba(51, 153, 255, 0.2);
    --vscode-peekViewResult-selectionForeground: #6c6c6c;
    --vscode-peekViewTitle-background: #ffffff;
    --vscode-peekViewTitleDescription-foreground: rgba(108, 108, 108, 0.7);
    --vscode-peekViewTitleLabel-foreground: #333333;
    --vscode-pickerGroup-border: #cccedb;
    --vscode-pickerGroup-foreground: #006ab1;
    --vscode-progressBar-background: #0e70c0;
    --vscode-scrollbar-shadow: #dddddd;
    --vscode-scrollbarSlider-activeBackground: rgba(0, 0, 0, 0.6);
    --vscode-scrollbarSlider-background: rgba(100, 100, 100, 0.4);
    --vscode-scrollbarSlider-hoverBackground: rgba(100, 100, 100, 0.7);
    --vscode-settings-checkboxBackground: #ffffff;
    --vscode-settings-checkboxBorder: #cecece;
    --vscode-settings-dropdownBackground: #ffffff;
    --vscode-settings-dropdownBorder: #cecece;
    --vscode-settings-headerForeground: #444444;
    --vscode-settings-inactiveSelectedItemBorder: #cccedb;
    --vscode-settings-modifiedItemForeground: #018101;
    --vscode-settings-numberInputBackground: #ffffff;
    --vscode-settings-numberInputBorder: #cecece;
    --vscode-settings-numberInputForeground: #616161;
    --vscode-settings-textInputBackground: #ffffff;
    --vscode-settings-textInputBorder: #cecece;
    --vscode-settings-textInputForeground: #616161;
    --vscode-sideBar-background: #f3f3f3;
    --vscode-sideBar-dropBackground: rgba(255, 255, 255, 0.12);
    --vscode-sideBarSectionHeader-background: rgba(128, 128, 128, 0.2);
    --vscode-sideBarTitle-foreground: #6f6f6f;
    --vscode-statusBar-background: #007acc;
    --vscode-statusBar-debuggingBackground: #cc6633;
    --vscode-statusBar-debuggingForeground: #ffffff;
    --vscode-statusBar-foreground: #ffffff;
    --vscode-statusBar-noFolderBackground: #68217a;
    --vscode-statusBar-noFolderForeground: #ffffff;
    --vscode-statusBarItem-activeBackground: rgba(255, 255, 255, 0.18);
    --vscode-statusBarItem-hoverBackground: rgba(255, 255, 255, 0.12);
    --vscode-statusBarItem-prominentBackground: #388a34;
    --vscode-statusBarItem-prominentHoverBackground: #369432;
    --vscode-tab-activeBackground: #ffffff;
    --vscode-tab-activeForeground: #333333;
    --vscode-tab-border: #f3f3f3;
    --vscode-tab-inactiveBackground: #ececec;
    --vscode-tab-inactiveForeground: rgba(51, 51, 51, 0.5);
    --vscode-tab-unfocusedActiveForeground: rgba(51, 51, 51, 0.7);
    --vscode-tab-unfocusedInactiveForeground: rgba(51, 51, 51, 0.25);
    --vscode-terminal-ansiBlack: #000000;
    --vscode-terminal-ansiBlue: #0451a5;
    --vscode-terminal-ansiBrightBlack: #666666;
    --vscode-terminal-ansiBrightBlue: #0451a5;
    --vscode-terminal-ansiBrightCyan: #0598bc;
    --vscode-terminal-ansiBrightGreen: #14ce14;
    --vscode-terminal-ansiBrightMagenta: #bc05bc;
    --vscode-terminal-ansiBrightRed: #cd3131;
    --vscode-terminal-ansiBrightWhite: #a5a5a5;
    --vscode-terminal-ansiBrightYellow: #b5ba00;
    --vscode-terminal-ansiCyan: #0598bc;
    --vscode-terminal-ansiGreen: #00bc00;
    --vscode-terminal-ansiMagenta: #bc05bc;
    --vscode-terminal-ansiRed: #cd3131;
    --vscode-terminal-ansiWhite: #555555;
    --vscode-terminal-ansiYellow: #949800;
    --vscode-terminal-foreground: #333333;
    --vscode-terminal-selectionBackground: rgba(0, 0, 0, 0.25);
    --vscode-textBlockQuote-background: rgba(127, 127, 127, 0.1);
    --vscode-textBlockQuote-border: rgba(0, 122, 204, 0.5);
    --vscode-textCodeBlock-background: rgba(220, 220, 220, 0.4);
    --vscode-textLink-activeForeground: #006ab1;
    --vscode-textLink-foreground: #006ab1;
    --vscode-textPreformat-foreground: #a31515;
    --vscode-textSeparator-foreground: rgba(0, 0, 0, 0.18);
    --vscode-titleBar-activeBackground: #dddddd;
    --vscode-titleBar-activeForeground: #333333;
    --vscode-titleBar-inactiveBackground: rgba(221, 221, 221, 0.6);
    --vscode-titleBar-inactiveForeground: rgba(51, 51, 51, 0.6);
    --vscode-widget-shadow: #a8a8a8;
}

body
{
    background-color: var(--vscode-editor-background);
    color: var(--vscode-editor-foreground);
    font-family: var(--vscode-editor-font-family);
    font-weight: var(--vscode-editor-font-weight);
    font-size: var(--vscode-editor-font-size);
    margin: 0;
    padding: 0 20px;
}

img
{
    max-width: 100%;
    max-height: 100%;
}

a
{
    color: var(--vscode-textLink-foreground);
}

a:hover
{
    color: var(--vscode-textLink-activeForeground);
}

a:focus,
input:focus,
select:focus,
textarea:focus
{
    outline: 1px solid -webkit-focus-ring-color;
    outline-offset: -1px;
}

code
{
    color: var(--vscode-textPreformat-foreground);
}

blockquote
{
    background: var(--vscode-textBlockQuote-background);
    border-color: var(--vscode-textBlockQuote-border);
}

::-webkit-scrollbar
{
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-thumb
{
    background-color: rgba(121, 121, 121, 0.4);
}

body.vscode-light::-webkit-scrollbar-thumb
{
    background-color: rgba(100, 100, 100, 0.4);
}

body.vscode-high-contrast::-webkit-scrollbar-thumb
{
    background-color: rgba(111, 195, 223, 0.3);
}

::-webkit-scrollbar-thumb:hover
{
    background-color: rgba(100, 100, 100, 0.7);
}

body.vscode-light::-webkit-scrollbar-thumb:hover
{
    background-color: rgba(100, 100, 100, 0.7);
}

body.vscode-high-contrast::-webkit-scrollbar-thumb:hover
{
    background-color: rgba(111, 195, 223, 0.8);
}

::-webkit-scrollbar-thumb:active
{
    background-color: rgba(85, 85, 85, 0.8);
}

body.vscode-light::-webkit-scrollbar-thumb:active
{
    background-color: rgba(0, 0, 0, 0.6);
}

body.vscode-high-contrast::-webkit-scrollbar-thumb:active
{
    background-color: rgba(111, 195, 223, 0.8);
}

.emoji
{
    height: 20px;
}

pre
{
    white-space: pre-wrap;
}

.page-break
{
    display: block;
    page-break-after: always;
}

.no-page-break
{
    page-break-inside: avoid;
}</style>
<style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

html, body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif;
	font-size: 14px;
	padding: 0 26px;
	line-height: 22px;
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
	line-height: auto;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

/** Theming */

pre code {
	color: var(--vscode-editor-foreground);
}


.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}
</style>
<style>/*
https://raw.githubusercontent.com/isagalaev/highlight.js/master/src/styles/vs2015.css
*/
/*
 * Visual Studio 2015 dark style
 * Author: Nicolas LLOBERA <nllobera@gmail.com>
 */


.hljs-keyword,
.hljs-literal,
.hljs-symbol,
.hljs-name {
	color: #569CD6;
}
.hljs-link {
	color: #569CD6;
	text-decoration: underline;
}

.hljs-built_in,
.hljs-type {
	color: #4EC9B0;
}

.hljs-number,
.hljs-class {
	color: #B8D7A3;
}

.hljs-string,
.hljs-meta-string {
	color: #D69D85;
}

.hljs-regexp,
.hljs-template-tag {
	color: #9A5334;
}

.hljs-subst,
.hljs-function,
.hljs-title,
.hljs-params,
.hljs-formula {
	color: #DCDCDC;
}

.hljs-comment,
.hljs-quote {
	color: #57A64A;
	font-style: italic;
}

.hljs-doctag {
	color: #608B4E;
}

.hljs-meta,
.hljs-meta-keyword,
.hljs-tag {
	color: #9B9B9B;
}

.hljs-variable,
.hljs-template-variable {
	color: #BD63C5;
}

.hljs-attr,
.hljs-attribute,
.hljs-builtin-name {
	color: #9CDCFE;
}

.hljs-section {
	color: gold;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}

/*.hljs-code {
	font-family:'Monospace';
}*/

.hljs-bullet,
.hljs-selector-tag,
.hljs-selector-id,
.hljs-selector-class,
.hljs-selector-attr,
.hljs-selector-pseudo {
	color: #D7BA7D;
}

.hljs-addition {
	background-color: var(--vscode-diffEditor-insertedTextBackground, rgba(155, 185, 85, 0.2));
	color: rgb(155, 185, 85);
	display: inline-block;
	width: 100%;
}

.hljs-deletion {
	background: var(--vscode-diffEditor-removedTextBackground, rgba(255, 0, 0, 0.2));
	color: rgb(255, 0, 0);
	display: inline-block;
	width: 100%;
}


/*
From https://raw.githubusercontent.com/isagalaev/highlight.js/master/src/styles/vs.css
*/
/*

Visual Studio-like style based on original C# coloring by Jason Diamond <jason@diamond.name>

*/

.vscode-light .hljs-function,
.vscode-light .hljs-params {
	color: inherit;
}

.vscode-light .hljs-comment,
.vscode-light .hljs-quote,
.vscode-light .hljs-variable {
	color: #008000;
}

.vscode-light .hljs-keyword,
.vscode-light .hljs-selector-tag,
.vscode-light .hljs-built_in,
.vscode-light .hljs-name,
.vscode-light .hljs-tag {
	color: #00f;
}

.vscode-light .hljs-string,
.vscode-light .hljs-title,
.vscode-light .hljs-section,
.vscode-light .hljs-attribute,
.vscode-light .hljs-literal,
.vscode-light .hljs-template-tag,
.vscode-light .hljs-template-variable,
.vscode-light .hljs-type {
	color: #a31515;
}

.vscode-light .hljs-selector-attr,
.vscode-light .hljs-selector-pseudo,
.vscode-light .hljs-meta {
	color: #2b91af;
}

.vscode-light .hljs-doctag {
	color: #808080;
}

.vscode-light .hljs-attr {
	color: #f00;
}

.vscode-light .hljs-symbol,
.vscode-light .hljs-bullet,
.vscode-light .hljs-link {
	color: #00b0e8;
}


.vscode-light .hljs-emphasis {
	font-style: italic;
}

.vscode-light .hljs-strong {
	font-weight: bold;
}</style>

    </head>
    <body class="vscode-body vscode-light">
        <style type="text/css" rel="stylesheet">
img[src*='#center'] {
    display: block;
    margin: auto;
}
.center {
    text-align: center;
}
table {
    width: 100%;
}
</style>
<h1 id="programma-candle" id="%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0-%22candle%22" data-line="13" class="code-line">Программа &quot;Candle&quot;</h1>
<h1 id="soderzhanie" id="%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5" data-line="16" class="code-line">Содержание</h1>
<p data-line="18" class="code-line"><a href="#1-naznachenie-programmy">1 Назначение программы</a><br>
<a href="#2-usloviya-vypolneniya-programmy">2 Условия выполнения программы</a><br>
    <a href="#2-1-trebovaniya-k-apparatnomu-obespecheniyu">2.1 Требования к аппаратному обеспечению</a><br>
    <a href="#2-2-trebovaniya-k-programmnomu-obespecheniyu">2.2 Требования к программному обеспечению</a><br>
<a href="#3-vypolnenie-programmy">3 Выполнение программы</a><br>
    <a href="#3-1-ustanovka-programmy">3.1 Установка программы</a><br>
    <a href="#3-2-zapusk">3.2 Запуск</a><br>
    <a href="#3-3-glavnoe-okno">3.3 Главное окно</a><br>
        <a href="#3-3-1-glavnoe-menyu">3.3.1 Главное меню</a><br>
        <a href="#3-3-2-okna">3.3.2 Окна</a><br>
            <a href="#3-3-2-1-okno-g-kod-programma">3.3.2.1 Окно &quot;G-код программа&quot;</a><br>
            <a href="#3-3-2-2-okno-vizualizator">3.3.2.1 Окно &quot;Визуализатор&quot;</a><br>
            <a href="#3-3-2-3-okno-kamera">3.3.2.3 Окно &quot;Камера&quot;</a><br>
            <a href="#3-3-2-4-okno-konsol">3.3.2.4 Окно &quot;Консоль&quot;</a><br>
            <a href="#3-3-2-5-okna-ustroystvo-modifikaciya-polzovatel">3.3.2.5 Окна &quot;Устройство&quot;, &quot;Модификация&quot;, &quot;Пользователь&quot;</a><br>
        <a href="#3-3-3-instrumentalnye-paneli">3.3.3 Инструментальные панели</a><br>
            <a href="#3-3-3-1-panel-sostoyanie">3.3.3.1 Панель &quot;Состояние&quot;</a><br>
            <a href="#3-3-3-2-panel-upravlenie">3.3.3.2 Панель &quot;Управление&quot;</a><br>
            <a href="#3-3-3-3-panel-sistema-koordinat">3.3.3.3 Панель &quot;Система координат&quot;</a><br>
            <a href="#3-3-3-4-panel-shpindel">3.3.3.4 Панель &quot;Шпиндель&quot;</a><br>
            <a href="#3-3-3-5-panel-peremeshchenie">3.3.3.5 Панель &quot;Перемещение&quot;</a><br>
            <a href="#3-3-3-6-panel-korrekciya">3.3.3.6 Панель &quot;Коррекция&quot;</a><br>
            <a href="#3-3-3-7-panel-karta-vysot">3.3.3.7 Панель &quot;Карта высот&quot;</a><br>
            <a href="#3-3-3-8-panel-polzovatelskie-komandy">3.3.3.8 Панель &quot;Пользовательские команды&quot;</a><br>
    <a href="#3-4-okno-nastroek">3.4 Окно настроек</a><br>
    <a href="#3-5-podgotovka-programmy-k-rabote">3.5 Подготовка программы к работе</a><br>
    <a href="#3-6-zagruzka-upravlyayushchey-programmy">3.6 Загрузка управляющей программы</a><br>
    <a href="#3-7-sozdanie-karty-vysot">3.7 Создание карты высот</a><br>
    <a href="#3-8-vypolnenie-upravlyayushchey-programmy">3.8 Выполнение управляющей программы</a><br>
<a href="#4-soobshcheniya-operatoru">4 Сообщения оператору</a><br>
<a href="#5-razrabotka-rasshireniy">5 Разработка расширений</a><br>
    <a href="#5-1-fayl-konfiguracii-rasshireniya">5.1 Файл конфигурации расширения</a><br>
    <a href="#5-2-fayl-skripta">5.2 Файл скрипта</a><br>
    <a href="#5-3-fayl-perevoda">5.3 Файл перевода</a><br>
<a href="#prilozhenie-a-nastroyki-kontrollera">Приложение А. Настройки контроллера</a><br>
<a href="#prilozhenie-b-tablica-g-kod-komand">Приложение Б. Таблица G-код команд</a></p>
<hr>
<h1 id="1-naznachenie-programmy" id="1-%D0%BD%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D1%8B" data-line="57" class="code-line">1 Назначение программы</h1>
<p data-line="59" class="code-line">Программа &quot;Candle&quot; (далее - программа) предназначена для управления станками с числовым программным управлением (далее - ЧПУ), имеющими контроллер &quot;GRBL&quot; (далее - контроллер), с помощью ПЭВМ.</p>
<p data-line="61" class="code-line">Программа позволяет работать с фрезерными 3-ех осевыми станками, лазерными плоттерами.</p>
<p data-line="63" class="code-line">Основные функции программы:</p>
<ul>
<li data-line="65" class="code-line">Загрузка, редактирование, сохранение управляющих программ (далее - УП).</li>
<li data-line="66" class="code-line">Визуализация УП.</li>
<li data-line="67" class="code-line">Снятие карты неровности поверхности, коррекция УП в соответствии с заданной картой.</li>
<li data-line="68" class="code-line">Передача УП на ЧПУ.</li>
<li data-line="69" class="code-line">Отображение состояния ЧПУ.</li>
<li data-line="70" class="code-line">Ручное управление ЧПУ.</li>
</ul>
<h1 id="2-usloviya-vypolneniya-programmy" id="2-%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D1%8F-%D0%B2%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D1%8B" data-line="72" class="code-line">2 Условия выполнения программы</h1>
<h2 id="2-1-trebovaniya-k-apparatnomu-obespecheniyu" id="21-%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D0%BA-%D0%B0%D0%BF%D0%BF%D0%B0%D1%80%D0%B0%D1%82%D0%BD%D0%BE%D0%BC%D1%83-%D0%BE%D0%B1%D0%B5%D1%81%D0%BF%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D1%8E" data-line="74" class="code-line">2.1 Требования к аппаратному обеспечению</h2>
<p data-line="76" class="code-line">Для корректной работы программы необходима ПЭВМ со следующими характеристиками:</p>
<ul>
<li data-line="78" class="code-line">процессор, поддерживающий набор инструкций SSE2,</li>
<li data-line="79" class="code-line">графический адаптер, поддерживающий спецификацию OpenGL версии 2.0 и выше,</li>
<li data-line="80" class="code-line">дисплей с разрешением 1280х720,</li>
<li data-line="81" class="code-line">свободный порт USB или RS-232 для подключения ПЭВМ к контроллеру ЧПУ,</li>
<li data-line="82" class="code-line">свободное место на запоминающем устройстве не менее 20 Мб.</li>
</ul>
<h2 id="2-2-trebovaniya-k-programmnomu-obespecheniyu" id="22-%D1%82%D1%80%D0%B5%D0%B1%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D0%BA-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%BD%D0%BE%D0%BC%D1%83-%D0%BE%D0%B1%D0%B5%D1%81%D0%BF%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D1%8E" data-line="84" class="code-line">2.2 Требования к программному обеспечению</h2>
<p data-line="86" class="code-line">Программа требует наличия на ПЭВМ операционной системы Windows 7 и выше, с установленным драйвером OpenGL, драйвером преобразователя USB-UART при подключении ЧПУ через порт USB.</p>
<h1 id="3-vypolnenie-programmy" id="3-%D0%B2%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D1%8B" data-line="88" class="code-line">3 Выполнение программы</h1>
<h2 id="3-1-ustanovka-programmy" id="31-%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D1%8B" data-line="90" class="code-line">3.1 Установка программы</h2>
<p data-line="92" class="code-line">Программа поставляется в виде архива &quot;candle_v.v.v_x86.zip&quot; для 32-разрядных процессоров и &quot;candle_v.v.v_x64.zip&quot; для 64-разрядных, где v.v.v - номер версии программы.</p>
<p data-line="94" class="code-line">Для установки необходимо распаковать архив в рабочую папку, например: &quot;D:&quot;. В папке будет создан каталог программы &quot;Candle&quot; со всеми необходимыми для работы файлами.</p>
<p data-line="96" class="code-line">После распаковки, для обеспечения дальнейшего быстрого запуска, нужно создать ярлык к исполняемому файлу &quot;D:\Candle\candle.exe&quot;.</p>
<h2 id="3-2-zapusk" id="32-%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA" data-line="98" class="code-line">3.2 Запуск</h2>
<p data-line="100" class="code-line">Запуск программы осуществляется по вызову файла &quot;candle.exe&quot; из папки установки или с помощью созданного ранее ярлыка.</p>
<h2 id="3-3-glavnoe-okno" id="33-%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5-%D0%BE%D0%BA%D0%BD%D0%BE" data-line="102" class="code-line">3.3 Главное окно</h2>
<p data-line="104" class="code-line">При запуске программы на дисплее должно отобразиться главное окно программы, представленное на рисунке 1.</p>
<p data-line="106" class="code-line"><img src="images/mainwindow.png#center" alt="Главное окно программы" class="loading" id="image-hash-23e1d932be5ba7bc36caaaa387b314229afb1e3e580746c3a7fdbd45e8e1ca33"></p>
<p class="center">Рисунок 1 - Главное окно программы</p>
<p data-line="109" class="code-line">Главное окно состоит из главного меню, расположенного сверху, набора окон и инструментальных панелей:</p>
<ul>
<li data-line="111" class="code-line">&quot;G-код программа&quot; - основное окно, отображает список команд текущей УП.</li>
<li data-line="112" class="code-line">&quot;Визуализатор&quot; - графическое представление УП.</li>
<li data-line="113" class="code-line">&quot;Камера&quot; - изображение с камеры.</li>
<li data-line="114" class="code-line">&quot;Консоль&quot; - окно передачи команд в контроллер &quot;GRBL&quot; ЧПУ и отображения ответов.</li>
<li data-line="115" class="code-line">&quot;Устройство&quot; - окно с набором панелей для управления ЧПУ.</li>
<li data-line="116" class="code-line">&quot;Модификация&quot; - окно с набором панелей для коррекции УП.</li>
<li data-line="117" class="code-line">&quot;Пользователь&quot; - окно с набором пользовательских панелей.</li>
</ul>
<p data-line="119" class="code-line">Каждое окно имеет область заголовка и область содержимого. В заголовке расположено название окна, кнопки &quot;Отделить&quot;, &quot;Закрыть&quot;, в области содержимого - элементы ввода и отображения информации, а также инструментальные панели.</p>
<p data-line="121" class="code-line">Все окна, за исключением окна &quot;G-код программа&quot;, могут быть перемещены перетаскиванием с нажатой левой кнопки мыши (далее - ЛКМ) на заголовке окна. В процессе перемещения конфигурация главного окна программы будет динамически изменяться, указывая будущее расположение перемещаемого окна.</p>
<p data-line="123" class="code-line">Окна могут быть отделены от главного окна нажатием на кнопку &quot;Отделить&quot; заголовка, закрыты - &quot;Закрыть&quot;. Отделенные окна могут быть возвращены в главное окно перетаскиванием за заголовок, закрытые - выбором соответствующего пункта в главном меню &quot;Вид - Окна&quot;.</p>
<p data-line="125" class="code-line">Размеры окон изменяются нажатием ЛКМ на границу окна и ее перетаскиванием в нужную сторону.</p>
<h3 id="3-3-1-glavnoe-menyu" id="331-%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5-%D0%BC%D0%B5%D0%BD%D1%8E" data-line="127" class="code-line">3.3.1 Главное меню</h3>
<p data-line="129" class="code-line">Главное меню программы предоставляет доступ к основным функциям программы. Меню разделено на группы и пункты, описание которых приведено в таблице 1.</p>
<p data-line="131" class="code-line">Таблица 1 - Главное меню программы</p>
<table>
<thead>
<tr>
<th>Группа</th>
<th>Пункт</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>Файл</td>
<td>Новый</td>
<td>Создание новой УП</td>
</tr>
<tr>
<td></td>
<td>Открыть</td>
<td>Загрузка файла УП</td>
</tr>
<tr>
<td></td>
<td>Недавние файлы</td>
<td>Загрузка одного из последних файлов УП</td>
</tr>
<tr>
<td></td>
<td>Сохранить</td>
<td>Запись изменений УП в файл</td>
</tr>
<tr>
<td></td>
<td>Сохранить как</td>
<td>Запись УП в указанный файл</td>
</tr>
<tr>
<td>Вид</td>
<td>Окна</td>
<td>Выбор отображаемых окон</td>
</tr>
<tr>
<td></td>
<td>Панели</td>
<td>Выбор отображаемых панелей</td>
</tr>
<tr>
<td></td>
<td>Зафиксировать окна</td>
<td>Запрет/разрешение перемещения окон</td>
</tr>
<tr>
<td></td>
<td>Зафиксировать панели</td>
<td>Запрет/разрешение перемещения панелей</td>
</tr>
<tr>
<td>Сервис</td>
<td>Настройки</td>
<td>Вызов окна настроек программы</td>
</tr>
<tr>
<td>Справка</td>
<td>Содержание</td>
<td>Запуск справочной системы программы</td>
</tr>
<tr>
<td></td>
<td>О программе</td>
<td>Вызов окна с информацией о программе</td>
</tr>
</tbody>
</table>
<h3 id="3-3-2-okna" id="332-%D0%BE%D0%BA%D0%BD%D0%B0" data-line="148" class="code-line">3.3.2 Окна</h3>
<h4 id="3-3-2-1-okno-g-kod-programma" id="3321-%D0%BE%D0%BA%D0%BD%D0%BE-%22g-%D0%BA%D0%BE%D0%B4-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0%22" data-line="150" class="code-line">3.3.2.1 Окно &quot;G-код программа&quot;</h4>
<p data-line="152" class="code-line">Текущая УП отображается в окне &quot;G-код программа&quot;, представленном на рисунке 2.</p>
<p data-line="154" class="code-line"><img src="images/g-codeprogram.png#center" alt="Окно &quot;G-код программа&quot;" class="loading" id="image-hash-29d931702f11bb1d22254816abd7375d776fb5c6eb406bfa39de511399b9d3b6"></p>
<p class="center">Рисунок 2 - Окно "G-код программа"</p>
<p data-line="157" class="code-line">Каждая строка УП соответствует строке в таблице, содержащей столбцы:</p>
<ul>
<li data-line="159" class="code-line">&quot;№&quot; - номер строки УП.</li>
<li data-line="160" class="code-line">&quot;Команда&quot; - команда УП.</li>
<li data-line="161" class="code-line">&quot;Состояние&quot; - текущее состояние команды (&quot;В очереди&quot;, &quot;Отправлена&quot;, &quot;Обработана&quot;, &quot;Пропущена&quot;).</li>
<li data-line="162" class="code-line">&quot;Ответ&quot; - ответ контроллера на отправленную команду.</li>
</ul>
<p data-line="164" class="code-line">УП может быть отредактирована, поддерживаются следующие функции:</p>
<ul>
<li data-line="166" class="code-line">Изменение команды в выбранной строке.</li>
<li data-line="167" class="code-line">Добавления новых строк УП.</li>
<li data-line="168" class="code-line">Удаление строк УП.</li>
</ul>
<p data-line="170" class="code-line">Вход в режим редактирования команды УП выполняется двойным нажатием ЛКМ в столбце &quot;Команда&quot; выбранной строки или нажатием клавиши &lt;F2&gt; в предварительно выбранной ячейке. Подтверждение ввода измененной команды осуществляется нажатием клавиши &lt;Enter&gt; или &lt;Tab&gt;, отмена - нажатием клавиши &lt;Esc&gt;.</p>
<p data-line="172" class="code-line">Для добавления строки - необходимо выбрать в таблице строку, перед которой вставляется новая строка, и активировать пункт &quot;Вставить строку&quot; контекстного меню, вызываемого нажатием правой кнопки мыши (далее - ПКМ) в области таблицы, или нажать на клавишу &lt;Ins&gt; клавиатуры.</p>
<p data-line="174" class="code-line">Удаление выделенных строк таблицы производится вызовом пункта &quot;Удалить строки&quot; контекстного меню таблицы или нажатием на клавишу &lt;Del&gt; клавиатуры.</p>
<p data-line="176" class="code-line">Под таблицей расположены кнопки управления загрузкой и отправкой УП в контроллер ЧПУ:</p>
<ul>
<li data-line="178" class="code-line">&quot;Открыть&quot; - вызывает диалог выбора файла УП, в случае подтверждения выбора - загружает УП.</li>
<li data-line="179" class="code-line">&quot;Сброс&quot; - снимает выделение в таблице, устанавливает первую строку УП текущей, сбрасывает состояние команд.</li>
<li data-line="180" class="code-line">&quot;Отправить&quot; - запускает процесс передачи УП в контроллер ЧПУ.</li>
<li data-line="181" class="code-line">&quot;Пауза&quot; - приостанавливает процесс передачи УП.</li>
<li data-line="182" class="code-line">&quot;Прервать&quot; - останавливает передачу УП.</li>
</ul>
<p data-line="184" class="code-line">Следует учитывать, что при активации команд &quot;Пауза&quot; и &quot;Остановить&quot; фактическая остановка ЧПУ выполняется только по опустошению входного буфера команд контроллера. Для немедленной остановки ЧПУ необходимо использовать команды панели &quot;Управление&quot;: &quot;Удержание&quot;, &quot;Сброс&quot;.</p>
<p data-line="186" class="code-line">Слева от кнопок расположен флаг, отвечающий за автоматическую прокрутку таблицы в процессе отправки УП. При активной передаче УП в контроллер и ручной прокрутке таблицы флаг сбрасывается.</p>
<h4 id="3-3-2-2-okno-vizualizator" id="3322-%D0%BE%D0%BA%D0%BD%D0%BE-%22%D0%B2%D0%B8%D0%B7%D1%83%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%82%D0%BE%D1%80%22" data-line="188" class="code-line">3.3.2.2 Окно &quot;Визуализатор&quot;</h4>
<p data-line="190" class="code-line">Графическое представление УП отображается в окне &quot;Визуализатор&quot; (рисунок 3).</p>
<p data-line="192" class="code-line"><img src="images/visualizer.png#center" alt="Окно &quot;Визуализатор&quot;" class="loading" id="image-hash-8cc9775fc38bfc9cdbf7e55e456a88ad7e2d5f89970b04fb48077c8fefe2eb30"></p>
<p class="center">Рисунок 3 - Окно "Визуализатор"</p>
<p data-line="195" class="code-line">В окне можно выделить пять функциональных областей:</p>
<ul>
<li data-line="197" class="code-line">Центральная или основная область, в которой выводится траектория инструмента УП в виде трехмерной (3D) проекции.</li>
<li data-line="198" class="code-line">Состояние контроллера ЧПУ в левом верхнем углу.</li>
<li data-line="199" class="code-line">Кнопки управления видом в правом верхнем углу.</li>
<li data-line="200" class="code-line">Информация о границах обработки УП в левом нижнем углу.</li>
<li data-line="201" class="code-line">Вспомогательная информация, выводимая в правом нижнем углу.</li>
</ul>
<p data-line="203" class="code-line">Траектория инструмента УП представлена набором отрезков линий:</p>
<ul>
<li data-line="205" class="code-line">Сплошными черными отрезками выделены части траектории линейной и круговой интерполяции УП.</li>
<li data-line="206" class="code-line">Пунктирными черными - ускоренные движения.</li>
<li data-line="207" class="code-line">Красным цветом - вертикальные перемещения.</li>
</ul>
<p data-line="209" class="code-line">При передаче УП в контроллер ЧПУ часть отрезков меняет цвет в зависимости от следующих условий: часть траектории, обработанная ЧПУ, выделяется серым цветом; часть траектории, отправленная в ЧПУ - фиолетовым.</p>
<p data-line="211" class="code-line">На траекторию УП нанесены три маркера-круга:</p>
<ul>
<li data-line="213" class="code-line">Красный маркер - начало траектории.</li>
<li data-line="214" class="code-line">Зеленый маркер - конец траектории.</li>
<li data-line="215" class="code-line">Фиолетовый - отрезок траектории, соответствующий выделенной команде в таблице окна &quot;G-код программа&quot;.</li>
</ul>
<p data-line="217" class="code-line">В основной области, также, отображается начало координат в виде прямоугольника красного цвета в плоскости X-Y, и осей: X - красного цвета, Y - зеленого, Z - синего. Здесь же выводится условное отображение инструмента в виде каркасной модели из линий оранжевого цвета.</p>
<p data-line="219" class="code-line">Навигация в основной области выполняется следующим образом:</p>
<ul>
<li data-line="221" class="code-line">Поворот 3D проекции осуществляется нажатием ЛКМ в основной области и перемещением курсора мыши в заданном направлении или нажатием на одну из кнопок управления видом в правом верхнем углу окна (&quot;Вид сверху&quot;, &quot;Вид спереди&quot;, &quot;Вид слева&quot;, &quot;Изометрия&quot;).</li>
<li data-line="222" class="code-line">Перемещении проекции в области осуществляется нажатием ЛКМ с удерживанием клавиши &lt;Shift&gt; клавиатуры и перемещением курсора мыши в заданном направлении.</li>
<li data-line="223" class="code-line">Масштаб проекции изменяется с помощью колеса прокрутки мыши или нажатием на кнопку &quot;Вписать&quot; в правом верхнем углу.</li>
</ul>
<p data-line="225" class="code-line">В левом верхнем углу окна расположена информация о текущем состоянии контроллера ЧПУ, а именно: строка состояния интерпретатора; текущие значения подачи и скорости вращения шпинделя; состояние компонентов ЧПУ (шпинделя, системы охлаждения).</p>
<p data-line="227" class="code-line">Строка состояния имеет следующий вид:</p>
<p class="center">[GC:G1 G54 G17 G21 G90 G94 M3 M9 T0 F75 S8000]</p>
<p data-line="231" class="code-line">В строке выводится текущий режим работы интерпретатора контроллера ЧПУ для 12 модальных групп, номер инструмента, скорость подачи и скорость вращения шпинделя. Группы и возможные режимы приведены в таблице 2.</p>
<p data-line="233" class="code-line">Таблица 2 - Режимы работы интерпретатора контроллера ЧПУ</p>
<table>
<thead>
<tr>
<th>Модальная группа</th>
<th style="text-align:left">Режимы</th>
</tr>
</thead>
<tbody>
<tr>
<td>Режим движения</td>
<td style="text-align:left">G0, G1, G2, G3, G38.2, G38.3, G38.4, G38.5, G80</td>
</tr>
<tr>
<td>Система координат</td>
<td style="text-align:left">G54, G55, G56, G57, G58, G59</td>
</tr>
<tr>
<td>Рабочая плоскость</td>
<td style="text-align:left">G17, G18, G19</td>
</tr>
<tr>
<td>Режим задания дистанции перемещения</td>
<td style="text-align:left">G90, G91</td>
</tr>
<tr>
<td>Режим IJK задания круговой интерполяции</td>
<td style="text-align:left">G91.1</td>
</tr>
<tr>
<td>Режим подачи</td>
<td style="text-align:left">G93, G94</td>
</tr>
<tr>
<td>Единицы измерения</td>
<td style="text-align:left">G20, G21</td>
</tr>
<tr>
<td>Режим компенсации радиуса инструмента</td>
<td style="text-align:left">G40</td>
</tr>
<tr>
<td>Режим компенсации длины инструмента</td>
<td style="text-align:left">G43.1, G49</td>
</tr>
<tr>
<td>Режим управления ходом программы</td>
<td style="text-align:left">M0, M1, M2, M30</td>
</tr>
<tr>
<td>Состояние шпинделя</td>
<td style="text-align:left">M3, M4, M5</td>
</tr>
<tr>
<td>Состояние системы охлаждения</td>
<td style="text-align:left">M7, M8, M9</td>
</tr>
</tbody>
</table>
<p data-line="250" class="code-line">Строка состояния компонентов ЧПУ имеет вид:</p>
<p class="center">СУ: SFM</p>
<p data-line="254" class="code-line">Символ &quot;S&quot; отвечает за состояние шпинделя, выводится при вращении шпинделя в направлении часовой стрелки, заменяется на символ &quot;C&quot; при вращении шпинделя против часовой стрелки и не выводится при остановке шпинделя. Символ &quot;F&quot; отображается при включенной системе водяного охлаждения, &quot;M&quot; - системе воздушного охлаждения.</p>
<p data-line="256" class="code-line">Границы обработки УП приведены в левом нижнем углу, здесь указаны минимальные и максимальные координаты для каждой из осей и габариты зоны обработки (без учета диаметра инструмента).</p>
<p data-line="258" class="code-line">В правом нижнем углу выводится информация о текущем времени работы ЧПУ под управлением загруженной УП и ориентировочное полное время работы по УП.</p>
<p data-line="260" class="code-line">Информация об очереди команд, отправляемых в контроллер ЧПУ представлена в строке ниже и включает в себя: общий размер команд, отправленных и обрабатываемых в данный момент контроллером ЧПУ; количество обрабатываемых команд; количество инжектированных команд (команд отправляемых помимо команд УП) в очереди.</p>
<p data-line="262" class="code-line">В этой же области имеется вспомогательная информация об общем количестве вершин, составляющих 3D проекцию, и значение количества кадров в секунду построения проекции.</p>
<h4 id="3-3-2-3-okno-kamera" id="3323-%D0%BE%D0%BA%D0%BD%D0%BE-%22%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D0%B0%22" data-line="264" class="code-line">3.3.2.3 Окно &quot;Камера&quot;</h4>
<p data-line="266" class="code-line">Изображение с подключенной к ПЭВМ камеры выводится в окне &quot;Камера&quot; (рисунок 4).</p>
<p data-line="268" class="code-line"><img src="images/camera.png#center" alt="Окно &quot;Камера&quot;" class="loading" id="image-hash-85213388b0b133deba9a6db4921fbd81d5ef0e5834283bfc7aa6ad9a414dfc18"></p>
<p class="center">Рисунок 4 - Окно "Камера"</p>
<p data-line="271" class="code-line">Перемещение вида в окне производится с нажатой ЛКМ смещением курсора мыши в заданном направлении, изменение масштаба - колесом прокрутки мыши.</p>
<p data-line="273" class="code-line">В окне имеются прицельные элементы: вертикальная, горизонтальная линии и окружность с центром в точке пересечения линий. Перемещение точки пересечения линий производится нажатием ЛКМ с удерживанием клавиши &lt;Shift&gt; клавиатуры и перемещением курсора мыши в заданном направлении.</p>
<p data-line="275" class="code-line">Параметры, такие как: разрешение изображения камеры, цвет и толщина линий прицельных элементов, доступны в окне настроек программы.</p>
<h4 id="3-3-2-4-okno-konsol" id="3324-%D0%BE%D0%BA%D0%BD%D0%BE-%22%D0%BA%D0%BE%D0%BD%D1%81%D0%BE%D0%BB%D1%8C%22" data-line="277" class="code-line">3.3.2.4 Окно &quot;Консоль&quot;</h4>
<p data-line="279" class="code-line">Для ручного управления ЧПУ, а также настройки и вывода информации о состоянии контроллера в программе предусмотрено окно &quot;Консоль&quot; (рисунок 5).</p>
<p data-line="281" class="code-line"><img src="images/console.png#center" alt="Окно &quot;Консоль&quot;" class="loading" id="image-hash-127c81dc5d41cbe0bade65d2ba47485502345782b14394d55f2a3e2f696f26b1"></p>
<p class="center">Рисунок 5 - Окно "Консоль"</p>
<p data-line="284" class="code-line">В нижней части окна имеется поле ввода команды и две кнопки: &quot;Отправить команду&quot; и &quot;Очистить консоль&quot;. В верхней части расположено многострочное поле вывода ответов от контроллера.</p>
<p data-line="286" class="code-line">Для отправки команды в контроллер ЧПУ необходимо ввести ее в соответствующее поле и нажать клавишу &lt;Enter&gt; клавиатуры или кнопку &quot;Отправить команду&quot;. После обработки команды контроллером, команда и ответ будут выведены в поле выше в следующем формате:</p>
<p class="center">Команда < Ответ</p>
<p data-line="290" class="code-line">Если в настройках программы включен флаг &quot;Отображать команды интерфейса пользователя&quot; в поле выводов ответов будут отображены все команды, отправляемые в контроллер по нажатию элементов управления инструментальных панелей. При включенном флаге &quot;Отображать команды G-code программы&quot; - все команды УП при передаче УП в контроллер.</p>
<p data-line="292" class="code-line">Очистка поля вывода ответов производится нажатием на кнопку &quot;Очистить консоль&quot;.</p>
<h4 id="3-3-2-5-okna-ustroystvo-modifikaciya-polzovatel" id="3325-%D0%BE%D0%BA%D0%BD%D0%B0-%22%D1%83%D1%81%D1%82%D1%80%D0%BE%D0%B9%D1%81%D1%82%D0%B2%D0%BE%22-%22%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F%22-%22%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%22" data-line="294" class="code-line">3.3.2.5 Окна &quot;Устройство&quot;, &quot;Модификация&quot;, &quot;Пользователь&quot;</h4>
<p data-line="296" class="code-line">Инструментальные панели с элементами управления и отображения информации о состоянии ЧПУ располагаются в окнах &quot;Устройство&quot;, &quot;Модификация&quot;, &quot;Пользователь&quot;.</p>
<p data-line="298" class="code-line">Наименование окон характеризует функциональное назначение панелей, расположенных в них, но не ограничивает их состав - все панели могут свободно перемещаться как внутри соответствующего окна так и между окнами.</p>
<p data-line="300" class="code-line">Перемещение осуществляется перетаскиванием панели за заголовок с нажатой ЛКМ. В процессе перетаскивания в окнах будет отображаться место будущего расположения панели в виде линии синего цвета.</p>
<p data-line="302" class="code-line">Большинство инструментальных панелей имеют способность сворачиваться для экономии места на экране ПЭВМ, данные панели имеют знак &quot;-&quot; слева от наименования в заголовке в развернутом состоянии и &quot;≡&quot; - в свернутом. Сворачивание и разворачивание панели осуществляется щелчком ЛКМ на заголовке.</p>
<p data-line="304" class="code-line">Текст заголовков панелей в нормальном состоянии имеет черный цвет, при активации важных функций панелей - красный.</p>
<p data-line="306" class="code-line">При запуске программы часть панелей отображается в неактивном состоянии и активируется только при подключении к ПЭВМ ЧПУ.</p>
<h3 id="3-3-3-instrumentalnye-paneli" id="333-%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D0%B8" data-line="308" class="code-line">3.3.3 Инструментальные панели</h3>
<h4 id="3-3-3-1-panel-sostoyanie" id="3331-%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D1%8C-%22%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B5%22" data-line="310" class="code-line">3.3.3.1 Панель &quot;Состояние&quot;</h4>
<p data-line="312" class="code-line">На панели &quot;Состояние&quot; (рисунок 6) выводятся текущие значения рабочих и машинных координат, а также режим работы контроллера ЧПУ. Координаты отображаются в полях вывода, расположенных по горизонтали в порядке: X, Y, Z.</p>
<p data-line="314" class="code-line">Возможные режимы работы контроллера ЧПУ (поле &quot;Статус&quot;) следующие:</p>
<ul>
<li data-line="316" class="code-line">&quot;Готов&quot; - режим готовности к приему команд.</li>
<li data-line="317" class="code-line">&quot;Тревога&quot; - режим аварии.</li>
<li data-line="318" class="code-line">&quot;Работа&quot; - режим выполнения УП.</li>
<li data-line="319" class="code-line">&quot;Дом&quot; - поиск домашней позиции.</li>
<li data-line="320" class="code-line">&quot;Удержание&quot; - приостановка движения, ожидание дальнейших команд продолжения/сброса.</li>
<li data-line="321" class="code-line">&quot;Проверка&quot; - интерпретация входящих команд без фактического перемещения инструмента.</li>
<li data-line="322" class="code-line">&quot;Дверь&quot; - режим срабатывания датчика двери.</li>
<li data-line="323" class="code-line">&quot;Перемещение&quot; - режим выполнения специальных команд перемещения.</li>
<li data-line="324" class="code-line">&quot;Сон&quot; - режим пониженного энергопотребления.</li>
</ul>
<p data-line="326" class="code-line">В этом же поле выводятся состояния, не относящиеся к режиму работы контроллера:</p>
<ul>
<li data-line="328" class="code-line">&quot;Нет соединения&quot; - при невозможности открыть последовательный порт подключения к ЧПУ.</li>
<li data-line="329" class="code-line">&quot;Порт открыт&quot; - при открытии последовательного порта, но отсутствии соединения с контроллером ЧПУ.</li>
</ul>
<p data-line="331" class="code-line">Фон поля &quot;Статус&quot; может изменять цвет в зависимости от состояния.</p>
<p data-line="333" class="code-line"><img src="images/status.png#center" alt="Панель &quot;Состояние&quot;" class="loading" id="image-hash-8719c601b0e1be5d9be962f5ec025681b1357ba1170d79919e7beb9dfaabe31f"></p>
<p class="center">Рисунок 6 - Панель "Состояние"</p>
<h4 id="3-3-3-2-panel-upravlenie" id="3332-%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D1%8C-%22%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%22" data-line="336" class="code-line">3.3.3.2 Панель &quot;Управление&quot;</h4>
<p data-line="338" class="code-line">Панель &quot;Управление&quot; содержит набор кнопок, отвечающих за базовые функции контроллера &quot;GRBL&quot; (рисунок 7). Состав, посылаемые команды (коды команд), и описание приведены в таблице 3 в порядке их расположения на панели: слева направо, сверху вниз.</p>
<p data-line="340" class="code-line"><img src="images/control.png#center" alt="Панель &quot;Управление&quot;" class="loading" id="image-hash-9702518987465c99d267091911f249ece734aa5621b38f581d44108b04619ae4"></p>
<p class="center">Рисунок 7 - Панель "Управление"</p>
<p data-line="343" class="code-line">Таблица 3 - Кнопки панели &quot;Управления&quot;</p>
<table>
<thead>
<tr>
<th>Кнопка</th>
<th>Команда</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>Домой</td>
<td>$H</td>
<td>Поиск домашнего положения</td>
</tr>
<tr>
<td>Удерживание</td>
<td>! или ~</td>
<td>Остановка текущего перемещения (команда !) или возобновление движения (~)</td>
</tr>
<tr>
<td>Сброс</td>
<td>0x18</td>
<td>Программный сброс контроллера</td>
</tr>
<tr>
<td>Разблокировка</td>
<td>$X</td>
<td>Принудительная разблокировка режима аварии</td>
</tr>
<tr>
<td>Проверка</td>
<td>$C или 0x18</td>
<td>Включение (команда $C)/выключение (команда 0x18) режима проверки УП</td>
</tr>
<tr>
<td>Сон</td>
<td>$SLP</td>
<td>Перевод контроллера в режим пониженного энергопотребления</td>
</tr>
<tr>
<td>Дверь</td>
<td>0x84</td>
<td>Принудительный перевод контроллера в режим срабатывания датчика двери</td>
</tr>
<tr>
<td>Охлаждение</td>
<td>0xA0</td>
<td>Включение/выключение системы водяного охлаждения</td>
</tr>
</tbody>
</table>
<p data-line="356" class="code-line">Следует отметить, что при выключении режима проверки УП, посылается команда программного сброса с последующим восстановлением состояния контроллера и смещений рабочих координат.</p>
<h4 id="3-3-3-3-panel-sistema-koordinat" id="3333-%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D1%8C-%22%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0-%D0%BA%D0%BE%D0%BE%D1%80%D0%B4%D0%B8%D0%BD%D0%B0%D1%82%22" data-line="358" class="code-line">3.3.3.3 Панель &quot;Система координат&quot;</h4>
<p data-line="360" class="code-line">На рисунке 8 изображена панель управления системой координат ЧПУ (далее - СК).</p>
<p data-line="362" class="code-line"><img src="images/coordinatesystem.png#center" alt="Панель &quot;Система координат&quot;" class="loading" id="image-hash-12c3aa65d56f287553ded948b3f5f9503dbf86c6e7cb343c69c0f28c3811e4d6"></p>
<p class="center">Рисунок 8 - Панель "Система координат"</p>
<p data-line="365" class="code-line">В верхней части панели выводятся смещения для активной СК для осей X, Y и Z, в нижней расположены кнопки выбора СК и обнуления текущих координат по оси X, Y, Z, всех осей одновременно для активной СК.</p>
<h4 id="3-3-3-4-panel-shpindel" id="3334-%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D1%8C-%22%D1%88%D0%BF%D0%B8%D0%BD%D0%B4%D0%B5%D0%BB%D1%8C%22" data-line="367" class="code-line">3.3.3.4 Панель &quot;Шпиндель&quot;</h4>
<p data-line="369" class="code-line">На панели управления шпинделем (рисунок 9) расположены:</p>
<ul>
<li data-line="371" class="code-line">Поле ввода для установки/вывода заданной скорости вращения шпинделя.</li>
<li data-line="372" class="code-line">Горизонтальный ползунок установки/вывода скорости.</li>
<li data-line="373" class="code-line">Кнопка включения/выключения шпинделя.</li>
</ul>
<p data-line="375" class="code-line"><img src="images/spindle.png#center" alt="Панель &quot;Шпиндель&quot;" class="loading" id="image-hash-ff3f7de751b68ec8f6b1f393727c52e9c45ea3ab9ee3c17d51b010d4e1e82bcb"></p>
<p class="center">Рисунок 9 - Панель "Шпиндель"</p>
<p data-line="378" class="code-line">Скорость вращения может задаваться как вводом числа в соответствующее поле, так и с помощью ползунка.</p>
<p data-line="380" class="code-line">Текст в поле ввода может иметь два цвета: черный в случае, если текущая скорость вращения шпинделя соответствует заданной; красный - в противном случае.</p>
<p data-line="382" class="code-line">Ползунок имеет ручку в виде круга серого цвета с контуром темного цвета, с помощью которой задается скорость вращения шпинделя и маркер в виде круга с более светлыми цветами, отображающий текущую скорость вращения.</p>
<p data-line="384" class="code-line">Во время передачи УП в контроллер скорость вращения может быть изменена с помощью вышеуказанных элементов управления, при этом используются инжектированные G-код команды &quot;S&quot;, или с помощью функции переопределения скорости панели &quot;Коррекция&quot;. Включение/выключение шпинделя во время передачи возможно только при переводе контроллера в режим удерживания.</p>
<h4 id="3-3-3-5-panel-peremeshchenie" id="3335-%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D1%8C-%22%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D1%89%D0%B5%D0%BD%D0%B8%D0%B5%22" data-line="386" class="code-line">3.3.3.5 Панель &quot;Перемещение&quot;</h4>
<p data-line="388" class="code-line">На панели &quot;Перемещение&quot; находятся элементы управления движением инструмента ЧПУ, а именно:</p>
<ul>
<li data-line="390" class="code-line">Кнопки движения по осям X (стрелки влево, вправо), Y (стрелки вверх, вниз), Z (стрелки вверх, вниз, расположенные справа).</li>
<li data-line="391" class="code-line">Кнопка &quot;Стоп&quot;, расположенная по центру кнопок движения по осям X и Y, отвечающая за принудительную остановку движения.</li>
<li data-line="392" class="code-line">Выпадающий список &quot;Шаг&quot;, в котором можно задать шаг перемещения.</li>
<li data-line="393" class="code-line">Выпадающий список &quot;Подача&quot;, отвечающий за выбор скорости перемещения.</li>
<li data-line="394" class="code-line">Флаг &quot;Управление с клавиатуры&quot;, включающий управление перемещением с клавиатуры ПЭВМ.</li>
</ul>
<p data-line="396" class="code-line"><img src="images/jogging.png#center" alt="Панель &quot;Перемещение&quot;" class="loading" id="image-hash-811a316d6995fe62e92955b69e20545f3fd5b35212e770ee9d8c598f8c57be60"></p>
<p class="center">Рисунок 10 - Панель "Перемещение"</p>
<p data-line="399" class="code-line">Списки &quot;Шаг&quot; и &quot;Подача&quot; имеют предварительные наборы шагов перемещения и скоростей соответственно, но позволяют ввести произвольные значения в поля списков. Введенные значения запоминаются при включении флага &quot;Управление с клавиатуры&quot; и могут выбираться из списков при последующем запуске программы.</p>
<p data-line="401" class="code-line">Каждой кнопке панели, а также перелистыванию значений &quot;Шаг&quot; и &quot;Подача&quot; могут быть назначены быстрые клавиши, задаваемые в окне &quot;Настройки&quot; программы. Управление данными клавишами включается флагом &quot;Управление с клавиатуры&quot;.</p>
<h4 id="3-3-3-6-panel-korrekciya" id="3336-%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D1%8C-%22%D0%BA%D0%BE%D1%80%D1%80%D0%B5%D0%BA%D1%86%D0%B8%D1%8F%22" data-line="403" class="code-line">3.3.3.6 Панель &quot;Коррекция&quot;</h4>
<p data-line="405" class="code-line">На рисунке 11 представлен вид панели &quot;Коррекция&quot;. На панели расположены элементы переопределения скорости подачи, скорости холостого хода и скорости вращения шпинделя во время отправки УП в контроллер ЧПУ.</p>
<p data-line="407" class="code-line">Элементы аналогичны таковым, расположенным на панели &quot;Шпиндель&quot;, за исключением замененной кнопки включения соответствующим флагом.</p>
<p data-line="409" class="code-line"><img src="images/overriding.png#center" alt="Панель &quot;Коррекция&quot;" class="loading" id="image-hash-3d8fed3a166c590134689b7c666d6fd60a1fb6c803d98d0e5df19280af19460e"></p>
<p class="center">Рисунок 11 - Панель "Коррекция"</p>
<h4 id="3-3-3-7-panel-karta-vysot" id="3337-%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D1%8C-%22%D0%BA%D0%B0%D1%80%D1%82%D0%B0-%D0%B2%D1%8B%D1%81%D0%BE%D1%82%22" data-line="412" class="code-line">3.3.3.7 Панель &quot;Карта высот&quot;</h4>
<p data-line="414" class="code-line">Панель &quot;Карта высот&quot; (рисунок 12) отвечает за создание, загрузку, снятие карты неровности поверхности и дальнейшую коррекцию УП для нивелирования кривизны детали, обрабатываемой с помощью ЧПУ. Данная функция полезна при фрезеровке печатных плат и гравировке.</p>
<p data-line="416" class="code-line"><img src="images/heightmap.png#center" alt="Панель &quot;Карта высот&quot;" class="loading" id="image-hash-3d0f64d50e7a67e3092f83adae1bdf9b28e220229547dbe5d4050a07f4d6e94b"></p>
<p class="center">Рисунок 12 - Панель "Карта высот"</p>
<p data-line="419" class="code-line">На панели имеются элементы создания, загрузки и включения режима работы с картой высот; задания границ прямоугольной зоны карты; установки количества точек зондирования по осям X и Y; установки рабочей высоты над поверхностью и глубины зондирования; установки скорости подачи; установки количества линий сетки разбиения УП по осям X и Y.</p>
<p data-line="421" class="code-line">Коррекция УП по активной карте высот производится включением флага &quot;Использовать карту высот&quot;.</p>
<p data-line="423" class="code-line">Более подробная информация об использовании карты высот приведена в п. <a href="#3-7-sozdanie-karty-vysot">3.7 &quot;Создание карты высот&quot;</a> данного руководства.</p>
<h4 id="3-3-3-8-panel-polzovatelskie-komandy" id="3338-%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D1%8C-%22%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D0%B5-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B%22" data-line="425" class="code-line">3.3.3.8 Панель &quot;Пользовательские команды&quot;</h4>
<p data-line="427" class="code-line">Для расширения функционала программы в части управления ЧПУ предусмотрена панель &quot;Пользовательские команды&quot; (рисунок 13). На панели расположены кнопки, по нажатию на которые в контроллер ЧПУ отправляются заранее определенные команды.</p>
<p data-line="429" class="code-line"><img src="images/usercommands.png#center" alt="Панель &quot;Пользовательские команды&quot;" class="loading" id="image-hash-30bbf28ec901cbde1eca20bf1dfc88502fdceae086c7a672f982b28f72e34c7f"></p>
<p class="center">Рисунок 13 - Панель "Пользовательские команды"</p>
<p data-line="432" class="code-line">Задание команд осуществляется в окне &quot;Настройки&quot; программы. В группе &quot;Пользовательские команды&quot; окна имеется таблица команд. В таблице имеется возможность добавить, удалить или переместить команду, а также задать атрибуты:</p>
<ul>
<li data-line="434" class="code-line">Текстовую подсказку, отображаемую над кнопкой панели при наведении на нее курсора мыши.</li>
<li data-line="435" class="code-line">Значок кнопки.</li>
<li data-line="436" class="code-line">Список G-код команд, отправляемых в контроллер ЧПУ при нажатии на соответствующую кнопку панели.</li>
</ul>
<p data-line="438" class="code-line">Программа содержит ограниченный набор значков для кнопок, набор может расширяться пользовательскими значками, для чего необходимо поместить файлы необходимых значков в каталог &quot;plugins/usercommands/images&quot; папки установки программы.</p>
<p data-line="440" class="code-line">Список команд, отправляемых в ЧПУ, может иметь одну G-код команду или набор команд, по одной в каждой строке поля в ячейке &quot;G-код&quot; таблицы.</p>
<p data-line="442" class="code-line">В G-код командах можно использовать вставки программного кода на языке программирования JavaScript, оформляемые внутри фигурных скобок, например:</p>
<ul>
<li data-line="444" class="code-line">Команда обнуления рабочей координаты X и запоминания смещения в переменной &quot;storedG92x&quot;</li>
</ul>
<pre><code data-line="446" class="code-line language-javascript"><div>G92X0
{<span class="hljs-keyword">var</span> storedG92x = vars.G92x}
</div></code></pre>
<ul>
<li data-line="451" class="code-line">Восстановление смещения координаты X после сброса контроллера ЧПУ</li>
</ul>
<pre><code data-line="453" class="code-line language-javascript"><div>G92X{vars.Mx - storedG92x - vars.x}
</div></code></pre>
<ul>
<li data-line="457" class="code-line">Запуск программы &quot;Блокнот&quot;</li>
</ul>
<pre><code data-line="459" class="code-line language-javascript"><div>{script.importExtension(<span class="hljs-string">"qt.core"</span>)}
{<span class="hljs-keyword">var</span> p = <span class="hljs-keyword">new</span> QProcess()}
{p.start(<span class="hljs-string">"notepad"</span>, [])}
</div></code></pre>
<p data-line="465" class="code-line">Подробнее об использовании языка программирования JavaScript в программе читайте в п. <a href="#5-razrabotka-rasshireniy">5 &quot;Разработка расширений&quot;</a> данного руководства</p>
<h2 id="3-4-okno-nastroek" id="34-%D0%BE%D0%BA%D0%BD%D0%BE-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA" data-line="467" class="code-line">3.4 Окно настроек</h2>
<p data-line="469" class="code-line">Настройки программы доступны в окне настроек (рисунок 14), вызываемое по активации пункта &quot;Настройки&quot; меню &quot;Сервис&quot; программы.</p>
<p data-line="471" class="code-line"><img src="images/settings.png#center" alt="Окно настроек" class="loading" id="image-hash-ad3d70794d270382925f4b96fd4b1c5b66aa1b597c3dd4252f70f398f25b6e20"></p>
<p class="center">Рисунок 14 - Окно настроек</p>
<p data-line="474" class="code-line">Окно содержит три области: область слева - список групп настроек; область справа - элементы управления настройками выбранной группы; область снизу - кнопка установки настроек в значения по-умолчанию, кнопки подтверждения и отмены изменений настроек.</p>
<p data-line="476" class="code-line">Ниже приведена информация о доступных настройках программы: группа, параметр, описание, допустимые значения, значение по-умолчанию.</p>
<p data-line="478" class="code-line">Таблица 4 - Настройки программы</p>
<table>
<thead>
<tr>
<th>Группа</th>
<th>Параметр</th>
<th>Описание</th>
<th>Допустимые значения</th>
<th>Значение по-умолчанию</th>
</tr>
</thead>
<tbody>
<tr>
<td>Соединение</td>
<td>Порт</td>
<td>Последовательный порт соединения с контроллером ЧПУ</td>
<td>Путь к устройству</td>
<td>Пусто</td>
</tr>
<tr>
<td></td>
<td>Скорость</td>
<td>Скорость обмена по последовательному порту</td>
<td>9600, 14400, 19200, 38400, 57600, 115200, произвольное число</td>
<td>115200</td>
</tr>
<tr>
<td></td>
<td>Период опроса</td>
<td>Время между запросами состояния контроллера</td>
<td>от 10 до 9999 мс</td>
<td>100</td>
</tr>
<tr>
<td>Информация о станке</td>
<td>Скорость шпинделя мин.</td>
<td>Минимальная скорость вращения шпинделя (используется панелью &quot;Шпиндель&quot;)</td>
<td>от 0 до 99999 об/мин</td>
<td>0</td>
</tr>
<tr>
<td></td>
<td>Скорость шпинделя макс.</td>
<td>Максимальная скорость вращения шпинделя</td>
<td>от 0 до 99999 об/мин</td>
<td>10000</td>
</tr>
<tr>
<td></td>
<td>Мощность лазера мин.</td>
<td>Минимальная мощность лазера (используется при полутоновом окрашивании растровой визуализации УП)</td>
<td>от 0 до 99999</td>
<td>0</td>
</tr>
<tr>
<td></td>
<td>Мощность лазера макс.</td>
<td>Максимальная мощность лазера</td>
<td>от 0 до 99999</td>
<td>100</td>
</tr>
<tr>
<td>Парсер</td>
<td>Размер сегментов, аппроксимирующих дуги - по длине</td>
<td>Длина отрезков, разбивающих дуги УП, при отображении в окне &quot;Визуализатор&quot; и работе карты высот</td>
<td>от 0.1 до 99 мм</td>
<td>0.1 (выключено)</td>
</tr>
<tr>
<td></td>
<td>Размер сегментов, аппроксимирующих дуги - по углу</td>
<td>Угол разбития дуг УП, при отображении в окне &quot;Визуализатор&quot; и работе карты высот</td>
<td>от 0 до 180 градусов</td>
<td>5 градусов (включено)</td>
</tr>
<tr>
<td>Отправка файла</td>
<td>Команды начала программы</td>
<td>G-код команды, отправляемые в контроллер ЧПУ перед передачей УП</td>
<td>Набор G-код команд (допустимо использование JavaScript)</td>
<td>Пусто</td>
</tr>
<tr>
<td></td>
<td>Команды конца программы</td>
<td>G-код команды, отправляемые в контроллер ЧПУ после передачи УП</td>
<td>Набор G-код команд (допустимо использование JavaScript)</td>
<td>Пусто</td>
</tr>
<tr>
<td></td>
<td>Команды смены инструмента</td>
<td>G-код команды, отправляемые в контроллер ЧПУ при обработке команд смены инструмента</td>
<td>Набор G-код команд (допустимо использование JavaScript)</td>
<td>Пусто</td>
</tr>
<tr>
<td></td>
<td>Игнорировать ошибки при отправке файла</td>
<td>Флаг, управляющий остановкой передачи УП при возникновении ошибок обработки команд контроллером</td>
<td>Включено, выключено</td>
<td>Выключено</td>
</tr>
<tr>
<td></td>
<td>Автоматически настраивать парсер перед отправкой с выбранной строки</td>
<td>Включение отправки команд настройки интерпретатора перед отправкой УП с выбранной строки</td>
<td>Включено, выключено</td>
<td>Включено</td>
</tr>
<tr>
<td></td>
<td>Приостанавливать передачу файла по командам смены инструмента</td>
<td>Управление приостановкой передачи УП при обработке команд смены инструмента</td>
<td>Включено, выключено</td>
<td>Включено</td>
</tr>
<tr>
<td>Визуализатор</td>
<td>Толщина линий</td>
<td>Толщина линий 3D проекции УП</td>
<td>от 1 до 9</td>
<td>1.5</td>
</tr>
<tr>
<td></td>
<td>Сглаживание</td>
<td>Управление сглаживанием линий 3D проекции УП</td>
<td>Включено, выключено</td>
<td>Включено</td>
</tr>
<tr>
<td></td>
<td>MSAA</td>
<td>Сглаживание линий 3D проекции УП методом MSAA</td>
<td>Включено, выключено</td>
<td>Включено</td>
</tr>
<tr>
<td></td>
<td>Частота кадров</td>
<td>Частота кадров построения 3D проекции УП</td>
<td>30, 60, 120, произвольное число</td>
<td>60</td>
</tr>
<tr>
<td></td>
<td>V-sync</td>
<td>Управление вертикальной синхронизацией</td>
<td>Включено, выключено</td>
<td>Выключено</td>
</tr>
<tr>
<td></td>
<td>Буфер глубины</td>
<td>Управление перекрытием линий в зависимости от удаленности при построении 3D проекции УП</td>
<td>Включено, выключено</td>
<td>Выключено</td>
</tr>
<tr>
<td></td>
<td>Режим отрисовки</td>
<td>Метод построения проекции УП, &quot;Векторный&quot; - в виде отрезков линий, &quot;Растр&quot; - в виде набора точек</td>
<td>Векторный, растр</td>
<td>Векторный</td>
</tr>
<tr>
<td></td>
<td>Упростить геометрию</td>
<td>Ограничение минимального размера сегмента УП при отрисовке проекции УП</td>
<td>Включено, выключено</td>
<td>Включено</td>
</tr>
<tr>
<td></td>
<td>Упростить геометрию - Точность</td>
<td>Минимальный размер сегмента УП (при нуле преобразуются только сегменты, лежащие на одной линии)</td>
<td>от 0 до 99 мм</td>
<td>0</td>
</tr>
<tr>
<td></td>
<td>Полутоновое окрашивание</td>
<td>Управляет функцией окрашивания точек при растровом построении проекции</td>
<td>Включено, выключено</td>
<td>Выключено</td>
</tr>
<tr>
<td></td>
<td>Полутоновое окрашивание - По 'S'-коду</td>
<td>Управляет функцией окрашивания точек по &quot;S&quot;-коду УП</td>
<td>Включено, выключено</td>
<td>Включено</td>
</tr>
<tr>
<td></td>
<td>Полутоновое окрашивание - По 'Z'-коду</td>
<td>Управляет функцией окрашивания точек по &quot;Z&quot;-коду УП</td>
<td>Включено, выключено</td>
<td>Выключено</td>
</tr>
<tr>
<td>Цвета</td>
<td>Визуализатор - Фон</td>
<td>Задает цвет фона в окне &quot;Визуализатор&quot;</td>
<td>Произвольный цвет</td>
<td>Белый</td>
</tr>
<tr>
<td></td>
<td>Визуализатор - Текст</td>
<td>Задает цвет текста в окне &quot;Визуализатор&quot;</td>
<td>Произвольный цвет</td>
<td>Черный</td>
</tr>
<tr>
<td></td>
<td>Визуализатор - Фреза</td>
<td>Задает цвет модели инструмента в окне &quot;Визуализатор&quot;</td>
<td>Произвольный цвет</td>
<td>Оранжевый</td>
</tr>
<tr>
<td></td>
<td>Траектория - Основной</td>
<td>Задает цвет рабочих ходов траектории в проекции УП</td>
<td>Произвольный цвет</td>
<td>Черный</td>
</tr>
<tr>
<td></td>
<td>Траектория - Выполненная</td>
<td>Задает цвет частей траектории, обработанных ЧПУ при передаче УП в контроллер</td>
<td>Произвольный цвет</td>
<td>Серый</td>
</tr>
<tr>
<td></td>
<td>Траектория - Подсветка</td>
<td>Задает цвет частей траектории, отправленных в ЧПУ, цвет маркера выбранной строки УП</td>
<td>Произвольный цвет</td>
<td>Фиолетовый</td>
</tr>
<tr>
<td></td>
<td>Траектория - Z-перемещения</td>
<td>Задает цвет вертикальных перемещений траектории</td>
<td>Произвольный цвет</td>
<td>Красный</td>
</tr>
<tr>
<td></td>
<td>Траектория - Начало</td>
<td>Задает цвет маркера начала УП</td>
<td>Произвольный цвет</td>
<td>Красный</td>
</tr>
<tr>
<td></td>
<td>Траектория - Конец</td>
<td>Задает цвет маркера конца УП</td>
<td>Произвольный цвет</td>
<td>Зеленый</td>
</tr>
<tr>
<td>Модель фрезы</td>
<td>Тип</td>
<td>Вид модели инструмента в окне &quot;Визуализатор&quot;</td>
<td>Плоская, коническая</td>
<td>Коническая</td>
</tr>
<tr>
<td></td>
<td>Угол</td>
<td>Угол конуса конической модели инструмента</td>
<td>от 0 до 180 градусов</td>
<td>15</td>
</tr>
<tr>
<td></td>
<td>Диаметр</td>
<td>Диаметр модели инструмента</td>
<td>от 0 до 99 мм</td>
<td>3</td>
</tr>
<tr>
<td></td>
<td>Длина</td>
<td>Длина модели инструмента</td>
<td>от 0 до 999 мм</td>
<td>30</td>
</tr>
<tr>
<td>Быстрые клавиши</td>
<td>-</td>
<td>Комбинации клавиш для быстрого вызова функций программы</td>
<td>Произвольные комбинации клавиш</td>
<td>Пусто</td>
</tr>
<tr>
<td>Консоль</td>
<td>Отображать команды G-code программы</td>
<td>Управляет отображением G-код команд УП в окне &quot;Консоль&quot; во время передачи УП в контроллер</td>
<td>Включено, выключено</td>
<td>Выключено</td>
</tr>
<tr>
<td></td>
<td>Отображать команды интерфейса пользователя</td>
<td>Управляет отображением G-код команд, отправляемых с помощью элементов инструментальных панелей</td>
<td>Включено, выключено</td>
<td>Включено</td>
</tr>
<tr>
<td></td>
<td>Автозавершение команды</td>
<td>Автоматическое завершение команды при вводе в поле окна &quot;Консоль&quot; на основе введенных прежде</td>
<td>Включено, выключено</td>
<td>Включено</td>
</tr>
<tr>
<td>Пользовательский интерфейс</td>
<td>Размер шрифта</td>
<td>Размер шрифта пользовательского интерфейса программы</td>
<td>8, 9, 10, 11, 12 пт или произвольное число</td>
<td>9</td>
</tr>
<tr>
<td></td>
<td>Язык интерфейса</td>
<td>Язык надписей пользовательского интерфейса программы</td>
<td>American English, русский (список может пополняться)</td>
<td>American English</td>
</tr>
<tr>
<td>Камера</td>
<td>Наименование</td>
<td>Наименование камеры, изображение которой выводится в окне &quot;Камера&quot;</td>
<td>Список доступных камер, произвольное наименование</td>
<td>Пусто</td>
</tr>
<tr>
<td></td>
<td>Разрешение</td>
<td>Разрешение изображения, выводимого с камеры</td>
<td>Список поддерживаемых разрешений, произвольное разрешение</td>
<td>1280x720</td>
</tr>
<tr>
<td></td>
<td>Позиция</td>
<td>Смещение изображения камеры в окне &quot;Камера&quot; по горизонтали и вертикали</td>
<td>Произвольное смещение в точках</td>
<td>0, 0</td>
</tr>
<tr>
<td></td>
<td>Масштаб</td>
<td>Коэффициент масштабирования изображения камеры</td>
<td>Произвольное число</td>
<td>1</td>
</tr>
<tr>
<td></td>
<td>Позиция перекрестья</td>
<td>Относительное смещение прицельных элементов по горизонтали и вертикали</td>
<td>Произвольное смещение в относительных единицах от 0 до 1</td>
<td>0, 0</td>
</tr>
<tr>
<td></td>
<td>Размер перекрестья</td>
<td>Диаметр прицельной окружности</td>
<td>от 1 до 100</td>
<td>20</td>
</tr>
<tr>
<td></td>
<td>Цвет перекрестья</td>
<td>Цвет прицельных элементов</td>
<td>Произвольный цвет</td>
<td>Красный</td>
</tr>
<tr>
<td></td>
<td>Толщина линии</td>
<td>Толщина линий прицельных элементов</td>
<td>от 0 до 100</td>
<td>1</td>
</tr>
<tr>
<td>Пользовательские команды</td>
<td>-</td>
<td>Таблица команд панели &quot;Пользовательские команды&quot;</td>
<td>Произвольный набор команд</td>
<td>Тестовые команды</td>
</tr>
</tbody>
</table>
<h2 id="3-5-podgotovka-programmy-k-rabote" id="35-%D0%BF%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D1%8B-%D0%BA-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B5" data-line="538" class="code-line">3.5 Подготовка программы к работе</h2>
<h2 id="3-6-zagruzka-upravlyayushchey-programmy" id="36-%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D1%8F%D1%8E%D1%89%D0%B5%D0%B9-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D1%8B" data-line="540" class="code-line">3.6 Загрузка управляющей программы</h2>
<h2 id="3-7-sozdanie-karty-vysot" id="37-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BA%D0%B0%D1%80%D1%82%D1%8B-%D0%B2%D1%8B%D1%81%D0%BE%D1%82" data-line="542" class="code-line">3.7 Создание карты высот</h2>
<h2 id="3-8-vypolnenie-upravlyayushchey-programmy" id="38-%D0%B2%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D1%8F%D1%8E%D1%89%D0%B5%D0%B9-%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D1%8B" data-line="544" class="code-line">3.8 Выполнение управляющей программы</h2>
<h1 id="4-soobshcheniya-operatoru" id="4-%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%82%D0%BE%D1%80%D1%83" data-line="546" class="code-line">4 Сообщения оператору</h1>
<h1 id="5-razrabotka-rasshireniy" id="5-%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D1%80%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D0%B9" data-line="548" class="code-line">5 Разработка расширений</h1>
<p data-line="550" class="code-line">Для добавления новых функций в программу, в т.ч. новых элементов пользовательского интерфейса, предусмотрен механизм расширений.</p>
<p data-line="552" class="code-line">Каждое расширение должно быть оформлено в виде папки, содержащей набор файлов:</p>
<ul>
<li data-line="554" class="code-line">Файл конфигурации &quot;config.ini&quot; - текстовый файл с описанием расширения.</li>
<li data-line="555" class="code-line">Файл скрипта &quot;script.js&quot; - код расширения.</li>
<li data-line="556" class="code-line">Вспомогательные файлы (файлы форм &quot;*.ui&quot;, настройки расширения, файлы переводов, изображения и т.д.)</li>
</ul>
<p data-line="558" class="code-line">Папка расширения должна храниться в каталоге &quot;plugins&quot; папки установки программы.</p>
<p data-line="560" class="code-line">В программе предустановлены три расширения: &quot;camera&quot;, &quot;coordinatessytem&quot; и &quot;usercommands&quot; отвечающие за функционал панелей &quot;Камера&quot;, &quot;Система координат&quot;, &quot;Пользовательские команды&quot; соответственно.</p>
<p data-line="562" class="code-line">Набор расширений программы может со временем пополняться.</p>
<h1 id="5-1-fayl-konfiguracii-rasshireniya" id="51-%D1%84%D0%B0%D0%B9%D0%BB-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%B8-%D1%80%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D1%8F" data-line="564" class="code-line">5.1 Файл конфигурации расширения</h1>
<p data-line="566" class="code-line">Файл конфигурации должен содержать два текстовых ключа в группе &quot;General&quot;:</p>
<ul>
<li data-line="568" class="code-line">&quot;title&quot; - заголовок окна и/или панели расширения.</li>
<li data-line="569" class="code-line">&quot;name&quot; - уникальное наименование расширения, записанное без пробелов.</li>
</ul>
<p data-line="571" class="code-line">Пример файла конфигурации расширения &quot;Система координат&quot;:</p>
<pre><code data-line="573" class="code-line"><code><div>[General]
title=&quot;Coordinate system&quot;
name=&quot;CoordinateSystemPlugin&quot;
</div></code></code></pre>
<h1 id="5-2-fayl-skripta" id="52-%D1%84%D0%B0%D0%B9%D0%BB-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%B0" data-line="579" class="code-line">5.2 Файл скрипта</h1>
<p data-line="581" class="code-line">Код расширения должен быть выполнен на языке программирования &quot;JavaScript&quot; и реализовывать функционал расширения.</p>
<p data-line="583" class="code-line">Расширение может предоставлять пользовательский интерфейс панели для окон &quot;Устройство&quot;, &quot;Модификация&quot;, &quot;Пользователь&quot;, отдельного окна в главном окне программы, интерфейс для окна настроек, так и не иметь его.</p>
<p data-line="585" class="code-line">При необходимости настройки расширения при запуске программы и/или создания элементов пользовательского интерфейса код расширения может содержать следующие функции:</p>
<p data-line="587" class="code-line">Таблица 5 - Функции скрипта</p>
<table>
<thead>
<tr>
<th>Функция</th>
<th>Аргументы</th>
<th>Возвращаемое значение</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>init</td>
<td>-</td>
<td>-</td>
<td>Функция инициализации расширения</td>
</tr>
<tr>
<td>createPanelWidget</td>
<td>-</td>
<td>Объект типа &quot;QWidget&quot;</td>
<td>Функция создания пользовательского интерфейса панели</td>
</tr>
<tr>
<td>createWindowWidget</td>
<td>-</td>
<td>Объект типа &quot;QWidget&quot;</td>
<td>Функция создания пользовательского интерфейса для главного окна программы</td>
</tr>
<tr>
<td>createSettingsWidget</td>
<td>-</td>
<td>Объект типа &quot;QWidget&quot;</td>
<td>Функция создания пользовательского интерфейса для окна настроек программы</td>
</tr>
</tbody>
</table>
<p data-line="596" class="code-line">Вызов данных функций производится главной программой при загрузке расширения в порядке их перечисления в таблице.</p>
<p data-line="598" class="code-line">В коде скрипта доступны глобальные объекты связи с главной программой, их описание приведено в таблице 6.</p>
<p data-line="600" class="code-line">Таблица 6 - Объекты скрипта</p>
<table>
<thead>
<tr>
<th>Объект</th>
<th>Свойство</th>
<th>Тип свойства</th>
<th>Аргументы</th>
<th>Возвращаемое значение</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>app</td>
<td>sendCommand</td>
<td>Функция</td>
<td>Команда, индекс команды</td>
<td>-</td>
<td>Отправка команды в контроллер ЧПУ, может иметь индекс - отрицательное число, меньшее -99</td>
</tr>
<tr>
<td></td>
<td>sendCommands</td>
<td>Функция</td>
<td>Команды, индекс команд</td>
<td>-</td>
<td>Отправка списка команд в виде строки с разделителем '\n' в контроллер ЧПУ</td>
</tr>
<tr>
<td></td>
<td>addAction</td>
<td>Функция</td>
<td>Действие</td>
<td>-</td>
<td>Добавление в программу действия - объекта типа &quot;QAction&quot;, для которого могут быть назначены быстрые клавиши</td>
</tr>
<tr>
<td></td>
<td>removeAction</td>
<td>Функция</td>
<td>Действие</td>
<td>-</td>
<td>Удаление из программы действия</td>
</tr>
<tr>
<td></td>
<td>buttonSize</td>
<td>Функция</td>
<td>-</td>
<td>Размер</td>
<td>Возвращает стандартный размер кнопок для панелей программы</td>
</tr>
<tr>
<td></td>
<td>responseReceived</td>
<td>Сигнал</td>
<td>Команда, индекс, ответ</td>
<td>-</td>
<td>Сигнал приема ответа от контроллера ЧПУ на ранее отправленную команду</td>
</tr>
<tr>
<td></td>
<td>statusReceived</td>
<td>Сигнал</td>
<td>Статус</td>
<td>-</td>
<td>Сигнал приема статуса контроллера, содержит строку ответа контроллера на команду &quot;?&quot;</td>
</tr>
<tr>
<td></td>
<td>senderStateChanged</td>
<td>Сигнал</td>
<td>Состояние</td>
<td>-</td>
<td>Сигнал смены состояния передачи УП в контроллер ЧПУ, описание состояний приведено в таблице 7</td>
</tr>
<tr>
<td></td>
<td>deviceStateChanged</td>
<td>Сигнал</td>
<td>Состояние</td>
<td>-</td>
<td>Сигнал смены состояния контроллера ЧПУ, описание состояний приведено в таблице 8</td>
</tr>
<tr>
<td></td>
<td>settingsAboutToLoad</td>
<td>Сигнал</td>
<td>-</td>
<td>-</td>
<td>Сигнал, генерируемый перед загрузкой настроек программы</td>
</tr>
<tr>
<td></td>
<td>settingsLoaded</td>
<td>Сигнал</td>
<td>-</td>
<td>-</td>
<td>Сигнал, генерируемый после загрузки настроек программы</td>
</tr>
<tr>
<td></td>
<td>settingsAboutToSave</td>
<td>Сигнал</td>
<td>-</td>
<td>-</td>
<td>Сигнал, генерируемый перед записью настроек программы</td>
</tr>
<tr>
<td></td>
<td>settingsSaved</td>
<td>Сигнал</td>
<td>-</td>
<td>-</td>
<td>Сигнал, генерируемый после записи настроек программы</td>
</tr>
<tr>
<td></td>
<td>settingsAboutToShow</td>
<td>Сигнал</td>
<td>-</td>
<td>-</td>
<td>Сигнал, генерируемый перед вызовом окна настроек программы</td>
</tr>
<tr>
<td></td>
<td>settingsAccepted</td>
<td>Сигнал</td>
<td>-</td>
<td>-</td>
<td>Сигнал, генерируемый при подтверждении изменений настроек программы</td>
</tr>
<tr>
<td></td>
<td>settingsRejected</td>
<td>Сигнал</td>
<td>-</td>
<td>-</td>
<td>Сигнал, генерируемый при отмене изменений настроек программы</td>
</tr>
<tr>
<td></td>
<td>settingsSetByDefault</td>
<td>Сигнал</td>
<td>-</td>
<td>-</td>
<td>Сигнал, генерируемый при установке настроек программы в значения по-умолчанию</td>
</tr>
<tr>
<td></td>
<td>pluginsLoaded</td>
<td>Сигнал</td>
<td>-</td>
<td>-</td>
<td>Сигнал, генерируемый после загрузки всех расширений программы</td>
</tr>
<tr>
<td></td>
<td>settings</td>
<td>Объект</td>
<td>-</td>
<td>-</td>
<td>Объект настроек программы</td>
</tr>
<tr>
<td></td>
<td>path</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Абсолютный путь к папке установки программы</td>
</tr>
<tr>
<td>app.settings</td>
<td>port</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Соединение - Порт&quot; настроек программы</td>
</tr>
<tr>
<td></td>
<td>baud</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Соединение - Скорость&quot;</td>
</tr>
<tr>
<td></td>
<td>queryStateTime</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Соединение - Период опроса&quot;</td>
</tr>
<tr>
<td></td>
<td>spindleSpeedMin</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Информация о станке - Скорость шпинделя мин.&quot;</td>
</tr>
<tr>
<td></td>
<td>spindleSpeedMax</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Информация о станке - Скорость шпинделя макс.&quot;</td>
</tr>
<tr>
<td></td>
<td>laserPowerMin</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Информация о станке - Мощность лазера мин.&quot;</td>
</tr>
<tr>
<td></td>
<td>laserPowerMax</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Информация о станке - Мощность лазера макс.&quot;</td>
</tr>
<tr>
<td></td>
<td>arcLength</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Размер сегментов, аппроксимирующих дуги - по длине&quot;</td>
</tr>
<tr>
<td></td>
<td>arcDegree</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Размер сегментов, аппроксимирующих дуги - по углу&quot;</td>
</tr>
<tr>
<td></td>
<td>arcDegreeMode</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Включение/выключение режима &quot;Размер сегментов, аппроксимирующих дуги - по углу&quot;</td>
</tr>
<tr>
<td></td>
<td>startCommands</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Отправка файла - Команды начала программы&quot;</td>
</tr>
<tr>
<td></td>
<td>endCommands</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Отправка файла - Команды конца программы&quot;</td>
</tr>
<tr>
<td></td>
<td>toolChangeCommands</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Отправка файла - Команды смены инструмента&quot;</td>
</tr>
<tr>
<td></td>
<td>ignoreErrors</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Отправка файла - Игнорировать ошибки при отправке файла&quot;</td>
</tr>
<tr>
<td></td>
<td>autoLine</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Отправка файла - Автоматически настраивать парсер перед отправкой с выбранной строки&quot;</td>
</tr>
<tr>
<td></td>
<td>pauseToolChange</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Отправка файла - Приостанавливать передачу файла по командам смены инструмента&quot;</td>
</tr>
<tr>
<td></td>
<td>lineWidth</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Визуализатор - Толщина линий&quot;</td>
</tr>
<tr>
<td></td>
<td>antialiasing</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Визуализатор - Сглаживание&quot;</td>
</tr>
<tr>
<td></td>
<td>msaa</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Визуализатор - MSAA&quot;</td>
</tr>
<tr>
<td></td>
<td>fps</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Визуализатор - Частота кадров&quot;</td>
</tr>
<tr>
<td></td>
<td>vsync</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Визуализатор - V-sync&quot;</td>
</tr>
<tr>
<td></td>
<td>zBuffer</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Визуализатор - Буфер глубины&quot;</td>
</tr>
<tr>
<td></td>
<td>drawModeVectors</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Визуализатор - Режим отрисовки&quot; (0 - растр, 1 - векторный)</td>
</tr>
<tr>
<td></td>
<td>simplify</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Визуализатор - Упростить геометрию&quot;</td>
</tr>
<tr>
<td></td>
<td>simplifyPrecision</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Визуализатор - Упростить геометрию - Точность&quot;</td>
</tr>
<tr>
<td></td>
<td>grayscaleSegments</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Визуализатор - Полутоновое окрашивание&quot;</td>
</tr>
<tr>
<td></td>
<td>grayscaleSCode</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Визуализатор - Полутоновое окрашивание - По 'S'-коду&quot;</td>
</tr>
<tr>
<td></td>
<td>toolType</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Модель фрезы - Тип&quot; (0 - плоская, 1 - коническая)</td>
</tr>
<tr>
<td></td>
<td>toolAngle</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Модель фрезы - Угол&quot;</td>
</tr>
<tr>
<td></td>
<td>toolDiameter</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Модель фрезы - Диаметр&quot;</td>
</tr>
<tr>
<td></td>
<td>toolLength</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Модель фрезы - Длина&quot;</td>
</tr>
<tr>
<td></td>
<td>showProgramCommands</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Консоль - Отображать команды G-code программы&quot;</td>
</tr>
<tr>
<td></td>
<td>showUICommands</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Консоль - Отображать команды интерфейса пользователя&quot;</td>
</tr>
<tr>
<td></td>
<td>autoCompletion</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Консоль - Автозавершение команды&quot;</td>
</tr>
<tr>
<td></td>
<td>fontSize</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Пользовательский интерфейс - Размер шрифта&quot;</td>
</tr>
<tr>
<td></td>
<td>language</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Параметр &quot;Пользовательский интерфейс - Язык интерфейса&quot; (ISO 639-1)</td>
</tr>
<tr>
<td></td>
<td>units</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Единицы измерения ЧПУ (0 - метрические, 1 - дюймовые)</td>
</tr>
<tr>
<td></td>
<td>rapidSpeed</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Скорость ускоренных перемещений ЧПУ</td>
</tr>
<tr>
<td></td>
<td>acceleration</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Ускорение перемещений ЧПУ</td>
</tr>
<tr>
<td></td>
<td>machineBounds</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Границы перемещений ЧПУ</td>
</tr>
<tr>
<td></td>
<td>homingEnabled</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Флаг функции поиска домашнего положения ЧПУ</td>
</tr>
<tr>
<td></td>
<td>softLimitsEnabled</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Флаг программных границ ЧПУ</td>
</tr>
<tr>
<td>vars</td>
<td>Mx</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Текущая машинная координата X</td>
</tr>
<tr>
<td></td>
<td>My</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Текущая машинная координата Y</td>
</tr>
<tr>
<td></td>
<td>Mz</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Текущая машинная координата Z</td>
</tr>
<tr>
<td></td>
<td>Wx</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Текущая рабочая координата X</td>
</tr>
<tr>
<td></td>
<td>Wy</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Текущая рабочая координата Y</td>
</tr>
<tr>
<td></td>
<td>Wz</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Текущая рабочая координата Z</td>
</tr>
<tr>
<td></td>
<td>G54x</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение координаты X системы координат G54</td>
</tr>
<tr>
<td></td>
<td>G54y</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение координаты Y системы координат G54</td>
</tr>
<tr>
<td></td>
<td>G54z</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение координаты Z системы координат G54</td>
</tr>
<tr>
<td></td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr>
<td></td>
<td>G59x</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение координаты X системы координат G59</td>
</tr>
<tr>
<td></td>
<td>G59y</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение координаты Y системы координат G59</td>
</tr>
<tr>
<td></td>
<td>G59z</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение координаты Z системы координат G59</td>
</tr>
<tr>
<td></td>
<td>CS</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Текущая система координат - строка &quot;G54&quot; ... &quot;G59&quot;</td>
</tr>
<tr>
<td></td>
<td>x</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение координаты X текущей системы координат</td>
</tr>
<tr>
<td></td>
<td>y</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение координаты Y текущей системы координат</td>
</tr>
<tr>
<td></td>
<td>z</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение координаты Z текущей системы координат</td>
</tr>
<tr>
<td></td>
<td>G92x</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение рабочей координаты X</td>
</tr>
<tr>
<td></td>
<td>G92y</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение рабочей координаты Y</td>
</tr>
<tr>
<td></td>
<td>G92z</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение рабочей координаты Z</td>
</tr>
<tr>
<td></td>
<td>G28x</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Сохраненная координата X команды G28</td>
</tr>
<tr>
<td></td>
<td>G28y</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Сохраненная координата Y команды G28</td>
</tr>
<tr>
<td></td>
<td>G28z</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Сохраненная координата Z команды G28</td>
</tr>
<tr>
<td></td>
<td>G30x</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Сохраненная координата X команды G30</td>
</tr>
<tr>
<td></td>
<td>G30y</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Сохраненная координата Y команды G30</td>
</tr>
<tr>
<td></td>
<td>G30z</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Сохраненная координата Z команды G30</td>
</tr>
<tr>
<td></td>
<td>TLOx</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение инструмента по координате X</td>
</tr>
<tr>
<td></td>
<td>TLOy</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение инструмента по координате Y</td>
</tr>
<tr>
<td></td>
<td>TLOz</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Смещение инструмента по координате Z</td>
</tr>
<tr>
<td></td>
<td>PRBx</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Координата X касания при зондировании</td>
</tr>
<tr>
<td></td>
<td>PRBy</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Координата Y касания при зондировании</td>
</tr>
<tr>
<td></td>
<td>PRBz</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Координата Z касания при зондировании</td>
</tr>
<tr>
<td></td>
<td>tool</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Номер текущего инструмента</td>
</tr>
<tr>
<td>script</td>
<td>importExtension</td>
<td>Функция</td>
<td>Наименование расширения</td>
<td>-</td>
<td>Подключение расширения JavaScript скрипта, список доступных расширений приведен в таблице 9</td>
</tr>
<tr>
<td></td>
<td>path</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Абсолютный путь к текущему расширению</td>
</tr>
</tbody>
</table>
<p data-line="702" class="code-line">Таблица 7 - Состояния передачи УП</p>
<table>
<thead>
<tr>
<th>Состояние</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>-1</td>
<td>Неизвестное состояние</td>
</tr>
<tr>
<td>0</td>
<td>Передача УП</td>
</tr>
<tr>
<td>1</td>
<td>Переход в состояние приостановки передачи</td>
</tr>
<tr>
<td>2</td>
<td>Приостановка передачи</td>
</tr>
<tr>
<td>3</td>
<td>Окончание передачи, все команды УП отправлены</td>
</tr>
<tr>
<td>4</td>
<td>Передача завершена, все команды УП обработаны контроллером ЧПУ</td>
</tr>
<tr>
<td>5</td>
<td>Ручная смена инструмента</td>
</tr>
</tbody>
</table>
<p data-line="714" class="code-line">Таблица 8 - Состояния контроллера ЧПУ</p>
<table>
<thead>
<tr>
<th>Состояние</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>-1</td>
<td>Неизвестное состояние</td>
</tr>
<tr>
<td>1</td>
<td>Готовность к приему команд</td>
</tr>
<tr>
<td>2</td>
<td>Тревога</td>
</tr>
<tr>
<td>3</td>
<td>Работа</td>
</tr>
<tr>
<td>4</td>
<td>Поиск домашнего положения</td>
</tr>
<tr>
<td>5</td>
<td>Переход в режим &quot;Удерживание&quot; завершен</td>
</tr>
<tr>
<td>6</td>
<td>Переход в режим &quot;Удерживание&quot;</td>
</tr>
<tr>
<td>8</td>
<td>Режим проверки УП</td>
</tr>
<tr>
<td>9</td>
<td>Дверь закрыта, готовность к возобновлению работы</td>
</tr>
<tr>
<td>10</td>
<td>Дверь открыта, ЧПУ остановлен</td>
</tr>
<tr>
<td>11</td>
<td>Дверь открыта, производится приостановка или парковка</td>
</tr>
<tr>
<td>12</td>
<td>Дверь закрыта, производится возобновление работы или возврат из парковки</td>
</tr>
<tr>
<td>13</td>
<td>Состояние перемещения</td>
</tr>
<tr>
<td>14</td>
<td>Режим сна</td>
</tr>
</tbody>
</table>
<p data-line="733" class="code-line">Таблица 9 - Расширения скрипта</p>
<table>
<thead>
<tr>
<th>Наименование расширения</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>qt.core</td>
<td>Набор базовых объектов Qt</td>
</tr>
<tr>
<td>qt.custom</td>
<td>Набор дополнительных элементов управления пользовательского интерфейса, описание в таблице 10</td>
</tr>
<tr>
<td>qt.gui</td>
<td>Набор объектов пользовательского интерфейса Qt</td>
</tr>
<tr>
<td>qt.multimedia</td>
<td>Набор мультимедийных объектов Qt</td>
</tr>
<tr>
<td>qt.network</td>
<td>Набор объектов Qt поддержки сети</td>
</tr>
<tr>
<td>qt.opengl</td>
<td>Набор объектов Qt поддержки спецификации OpenGL</td>
</tr>
<tr>
<td>qt.printsupport</td>
<td>Набор объектов Qt поддержки печати</td>
</tr>
<tr>
<td>qt.sql</td>
<td>Набор объектов Qt поддержки баз данных</td>
</tr>
<tr>
<td>qt.uitools</td>
<td>Набор объектов Qt для динамического создания пользовательского интерфейса</td>
</tr>
<tr>
<td>qt.xml</td>
<td>Набор объектов Qt поддержки языка разметки &quot;XML&quot;</td>
</tr>
<tr>
<td>qt.widgets</td>
<td>Набор элементов управления пользовательского интерфейса Qt</td>
</tr>
</tbody>
</table>
<p data-line="749" class="code-line">Таблица 10 - Дополнительные элементы управления пользовательского интерфейса</p>
<table>
<thead>
<tr>
<th>Тип объекта</th>
<th>Базовый тип</th>
<th>Назначение</th>
<th>Свойство</th>
<th>Тип свойства</th>
<th>Аргументы</th>
<th>Возвращаемое значение</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>ColorPicker</td>
<td>QWidget</td>
<td>Выбор цвета</td>
<td>colorInt</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>32-разрядный код цвета в формате AARRGGBB</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>colorSelected</td>
<td>Сигнал</td>
<td>Цвет</td>
<td>-</td>
<td>Сигнал, генерируемый при выборе цвета пользователем</td>
</tr>
<tr>
<td>Slider</td>
<td>QSlider</td>
<td>Ползунок с представлением текущего значения параметра</td>
<td>currentValue</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Текущее значение параметра</td>
</tr>
<tr>
<td>SliderBox</td>
<td>QWidget</td>
<td>Ползунок с полем ввода значения и флагом включения</td>
<td>value</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Уставка параметра</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>currentValue</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Текущее значение параметра</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>minimum</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Минимальное значение параметра</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>maximum</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Максимальное значение параметра</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>sliderPosition</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Позиция ползунка</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>ratio</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Отношение значения в поле ввода к положению ползунка</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>title</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Наименование параметра</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>suffix</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Единицы измерения параметра</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>isCheckable</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Отображение флага включения</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>isChecked</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Включение/выключение флага</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>valueUserChanged</td>
<td>Сигнал</td>
<td>-</td>
<td>-</td>
<td>Сигнал, генерируемый при изменении значения параметра пользователем</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>valueChanged</td>
<td>Сигнал</td>
<td>-</td>
<td>-</td>
<td>Сигнал, генерируемый при изменении значения параметра</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>toggled</td>
<td>Сигнал</td>
<td>Состояние</td>
<td>-</td>
<td>Сигнал, генерируемый при смене состояния флага включения параметра</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>click</td>
<td>Функция</td>
<td>-</td>
<td>-</td>
<td>Программное переключение флага</td>
</tr>
<tr>
<td>StyledToolButton</td>
<td>QToolButton</td>
<td>Кнопка инструментальной панели</td>
<td>backgroundColor</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Цвет фона кнопки, тип QColor</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>foregroundColor</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Цвет надписи на кнопке</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>highlightColor</td>
<td>Значение</td>
<td>-</td>
<td>-</td>
<td>Цвет подсветки границ кнопки</td>
</tr>
</tbody>
</table>
<h1 id="5-3-fayl-perevoda" id="53-%D1%84%D0%B0%D0%B9%D0%BB-%D0%BF%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4%D0%B0" data-line="774" class="code-line">5.3 Файл перевода</h1>
<p data-line="776" class="code-line">Каждое расширение может иметь файл перевода надписей. Формат имени файла следующий:</p>
<p class="center">translation_xx.qm,</p>
где xx - двухбуквенный код языка перевода.
<p data-line="781" class="code-line">Скомпилированные файлы перевода &quot;*.qm&quot; создаются из текстовых &quot;*.ts&quot; с помощью программы &quot;Qt Linguist&quot; или консольной команды &quot;lrelease&quot;, входящих в пакет установки фреймворка &quot;Qt&quot;.</p>
<p data-line="783" class="code-line">Подробнее о создании файлов переводов читайте в документации по фреймворку &quot;Qt&quot;: <a href="https://doc.qt.io/qt-5/qtlinguist-index.html">Qt Linguist Manual</a>.</p>
<h1 id="prilozhenie-a-nastroyki-kontrollera" id="%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B0-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D0%BB%D0%B5%D1%80%D0%B0" data-line="785" class="code-line">Приложение А. Настройки контроллера</h1>
<p data-line="787" class="code-line">Таблица 11 - Описание настроек контроллера GRBL версии 1.1</p>
<table>
<thead>
<tr>
<th>Код</th>
<th>Описание</th>
<th>Допустимые значения</th>
<th>Пример значения</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Длительность импульса &quot;Step&quot; управления шаговыми двигателями, микросекунды</td>
<td></td>
<td>10</td>
</tr>
<tr>
<td>1</td>
<td>Таймаут выключения шаговых двигателей, миллисекунды</td>
<td></td>
<td>25</td>
</tr>
<tr>
<td>2</td>
<td>Битовая маска инвертирования сигналов &quot;Step&quot;</td>
<td>Разряд 0 - ось X, 1 - Y, 2 - Z</td>
<td>0</td>
</tr>
<tr>
<td>3</td>
<td>Битовая маска инвертирования сигналов &quot;Dir&quot;</td>
<td>Разряд 0 - ось X, 1 - Y, 2 - Z</td>
<td>0</td>
</tr>
<tr>
<td>4</td>
<td>Флаг инвертирования сигнала &quot;Enable&quot;</td>
<td>0 - активный уровень низкий, 1 - высокий</td>
<td>0</td>
</tr>
<tr>
<td>5</td>
<td>Флаг инвертирования сигналов концевых выключателей</td>
<td>0 - активный уровень низкий, 1 - высокий</td>
<td>0</td>
</tr>
<tr>
<td>6</td>
<td>Флаг инвертирования сигнала зонда</td>
<td>0 - активный уровень низкий, 1 - высокий</td>
<td>0</td>
</tr>
<tr>
<td>10</td>
<td>Битовая маска вывода информации о состоянии контроллера</td>
<td>Разряд 0 - вывод рабочих координат, 1 - машинных, 2 - вывод информации о буфере</td>
<td>3</td>
</tr>
<tr>
<td>11</td>
<td>Значение параметра Junction deviation, миллиметры</td>
<td></td>
<td>0.01</td>
</tr>
<tr>
<td>12</td>
<td>Допустимое отклонение при аппроксимации дуг отрезками, миллиметры</td>
<td></td>
<td>0.002</td>
</tr>
<tr>
<td>13</td>
<td>Флаг вывода координат и смещений в дюймах</td>
<td>0 - миллиметры, 1 - дюймы</td>
<td>0</td>
</tr>
<tr>
<td>20</td>
<td>Флаг включения программных границ</td>
<td>0 - выключено, 1 - включено</td>
<td>0</td>
</tr>
<tr>
<td>21</td>
<td>Флаг включения аппаратных границ</td>
<td>0 - выключено, 1 - включено</td>
<td>0</td>
</tr>
<tr>
<td>22</td>
<td>Флаг включения функции поиска домашнего положения</td>
<td>0 - выключено, 1 - включено</td>
<td>0</td>
</tr>
<tr>
<td>23</td>
<td>Битовая маска инвертирования направления движения при поиске домашнего положения</td>
<td>Разряд 0 - ось X, 1 - Y, 2 - Z</td>
<td>0</td>
</tr>
<tr>
<td>24</td>
<td>Скорость поиска домашнего положения, миллиметры в секунду</td>
<td></td>
<td>25</td>
</tr>
<tr>
<td>25</td>
<td>Начальная скорость поиска домашнего положения, миллиметры в секунду</td>
<td></td>
<td>250</td>
</tr>
<tr>
<td>26</td>
<td>Время фильтра дребезга контактов концевых выключателей, миллисекунды</td>
<td></td>
<td>250</td>
</tr>
<tr>
<td>27</td>
<td>Расстояние отхода от концевых выключателей по завершению поиска домашнего положения, миллиметры</td>
<td></td>
<td>1</td>
</tr>
<tr>
<td>30</td>
<td>Максимальная скорость вращения шпинделя, обороты в секунду</td>
<td></td>
<td>10000</td>
</tr>
<tr>
<td>31</td>
<td>Минимальная скорость вращения шпинделя, обороты в секунду</td>
<td></td>
<td>0</td>
</tr>
<tr>
<td>32</td>
<td>Флаг включения режима &quot;Лазер&quot;, движение без остановки при обработке кода &quot;S&quot;</td>
<td>0 - выключено, 1 - включено</td>
<td>0</td>
</tr>
<tr>
<td>100</td>
<td>Количество шагов на один миллиметр по оси X</td>
<td></td>
<td>200</td>
</tr>
<tr>
<td>101</td>
<td>Количество шагов на один миллиметр по оси Y</td>
<td></td>
<td>200</td>
</tr>
<tr>
<td>102</td>
<td>Количество шагов на один миллиметр по оси Z</td>
<td></td>
<td>200</td>
</tr>
<tr>
<td>110</td>
<td>Максимально допустимая скорость подачи по оси X, миллиметры в секунду</td>
<td></td>
<td>2000</td>
</tr>
<tr>
<td>111</td>
<td>Максимально допустимая скорость подачи по оси Y, миллиметры в секунду</td>
<td></td>
<td>2000</td>
</tr>
<tr>
<td>112</td>
<td>Максимально допустимая скорость подачи по оси Z, миллиметры в секунду</td>
<td></td>
<td>2000</td>
</tr>
<tr>
<td>120</td>
<td>Ускорение по оси X, миллиметры в секунду за секунду</td>
<td></td>
<td>200</td>
</tr>
<tr>
<td>121</td>
<td>Ускорение по оси Y, миллиметры в секунду за секунду</td>
<td></td>
<td>200</td>
</tr>
<tr>
<td>122</td>
<td>Ускорение по оси Z, миллиметры в секунду за секунду</td>
<td></td>
<td>200</td>
</tr>
<tr>
<td>130</td>
<td>Максимально допустимое перемещение по оси X от домашнего положения (используется программными границами)</td>
<td></td>
<td>200</td>
</tr>
<tr>
<td>131</td>
<td>Максимально допустимое перемещение по оси Y от домашнего положения</td>
<td></td>
<td>200</td>
</tr>
<tr>
<td>132</td>
<td>Максимально допустимое перемещение по оси Z от домашнего положения</td>
<td></td>
<td>200</td>
</tr>
</tbody>
</table>
<h1 id="prilozhenie-b-tablica-g-kod-komand" id="%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B1-%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0-g-%D0%BA%D0%BE%D0%B4-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4" data-line="826" class="code-line">Приложение Б. Таблица G-код команд</h1>
<p data-line="828" class="code-line">Таблица 12 - Краткая информация по G-код командам</p>
<table>
<thead>
<tr>
<th>Команда</th>
<th>Описание</th>
<th>Пример</th>
</tr>
</thead>
<tbody>
<tr>
<td>G0</td>
<td>Ускоренное перемещение</td>
<td>G0 X10 Y20 Z30</td>
</tr>
<tr>
<td>G1</td>
<td>Линейная интерполяция</td>
<td>G1 X0 Y0 Z0 F100</td>
</tr>
<tr>
<td>G2</td>
<td>Круговая интерполяция по часовой стрелке</td>
<td>G2 X10 Y0 R5 F100</td>
</tr>
<tr>
<td>G3</td>
<td>Круговая интерполяция против часовой стрелки</td>
<td>G3 X10 Y0 R5 F100</td>
</tr>
<tr>
<td>G4</td>
<td>Задержка выполнения УП, P - время задержки в секундах</td>
<td>G4 P0.5</td>
</tr>
<tr>
<td>G10</td>
<td>Задание смещений системы координат</td>
<td>G10 L2 X10, G10 L20 X0</td>
</tr>
<tr>
<td>G17</td>
<td>Выбор плоскости X-Y круговой интерполяции</td>
<td>G17</td>
</tr>
<tr>
<td>G18</td>
<td>Выбор плоскости Z-X круговой интерполяции</td>
<td>G18</td>
</tr>
<tr>
<td>G19</td>
<td>Выбор плоскости Y-Z круговой интерполяции</td>
<td>G19</td>
</tr>
<tr>
<td>G20</td>
<td>Включение дюймовой системы измерения</td>
<td>G20</td>
</tr>
<tr>
<td>G21</td>
<td>Включение метрической системы измерения</td>
<td>G21</td>
</tr>
<tr>
<td>G28</td>
<td>Возврат в исходную позицию</td>
<td>G28 G91 X0 Y0 Z0</td>
</tr>
<tr>
<td>G28.1</td>
<td>Задание текущей позиции как исходной</td>
<td>G28.1</td>
</tr>
<tr>
<td>G30</td>
<td>Возврат в позицию смены инструмента</td>
<td>G30 G91 Z0</td>
</tr>
<tr>
<td>G30.1</td>
<td>Задание текущей позиции как позиции смены инструмента</td>
<td>G30.1</td>
</tr>
<tr>
<td>G38.2</td>
<td>Зондирование в направлении заготовки, ошибка при отсутствии контакта при перемещении на заданную дистанцию</td>
<td>G38.2 G91 X10 F10</td>
</tr>
<tr>
<td>G38.3</td>
<td>Зондирование в направлении заготовки</td>
<td>G38.3 G91 X10 F10</td>
</tr>
<tr>
<td>G38.4</td>
<td>Зондирование в направлении от заготовки, ошибка при сохранении контакта при перемещении на заданную дистанцию</td>
<td>G38.4 G91 X-10 F10</td>
</tr>
<tr>
<td>G38.5</td>
<td>Зондирование в направлении от заготовки</td>
<td>G38.4 G91 X-10 F10</td>
</tr>
<tr>
<td>G40</td>
<td>Отмена компенсации радиуса инструмента</td>
<td>G40</td>
</tr>
<tr>
<td>G43.1</td>
<td>Компенсация длины инструмента</td>
<td>G43.1 Z0.5</td>
</tr>
<tr>
<td>G49</td>
<td>Отмена компенсации длины инструмента</td>
<td>G49</td>
</tr>
<tr>
<td>G53</td>
<td>Использовать систему координат станка (машинные координаты)</td>
<td>G53 G90 G0 X0 Y0</td>
</tr>
<tr>
<td>G54...G59</td>
<td>Выбор системы координат</td>
<td>G55</td>
</tr>
<tr>
<td>G61</td>
<td>Включение режима точного останова</td>
<td>G1 G61 X10 F100</td>
</tr>
<tr>
<td>G80</td>
<td>Отмена циклов</td>
<td>G80</td>
</tr>
<tr>
<td>G90</td>
<td>Использовать абсолютные координаты</td>
<td>G1 G90 X10 Y10 Z0</td>
</tr>
<tr>
<td>G91</td>
<td>Использовать относительные координаты</td>
<td>G1 G91 X10</td>
</tr>
<tr>
<td>G91.1</td>
<td>Использовать относительные координаты I, J, K задания круговой интерполяции</td>
<td>G91.1</td>
</tr>
<tr>
<td>G92</td>
<td>Задать смещения рабочих координат</td>
<td>G92 X0 Y0</td>
</tr>
<tr>
<td>G92.1</td>
<td>Сброс смещения рабочих координат</td>
<td>G92.1</td>
</tr>
<tr>
<td>G93</td>
<td>Включение задания подачи в обратных единицах времени (1/F минут)</td>
<td>G93</td>
</tr>
<tr>
<td>G94</td>
<td>Включение задания подачи в миллиметрах в минуту</td>
<td>G94</td>
</tr>
<tr>
<td>M0</td>
<td>Приостановка выполнения УП</td>
<td>M0</td>
</tr>
<tr>
<td>M1</td>
<td>Условная приостановка выполнения УП</td>
<td>M1</td>
</tr>
<tr>
<td>M2</td>
<td>Завершение УП</td>
<td>M2</td>
</tr>
<tr>
<td>M3</td>
<td>Включение вращения шпинделя в направлении часовой стрелки</td>
<td>M3</td>
</tr>
<tr>
<td>M4</td>
<td>Включение вращения шпинделя в направлении против часовой стрелки</td>
<td>M4</td>
</tr>
<tr>
<td>M5</td>
<td>Выключение шпинделя</td>
<td>M5</td>
</tr>
<tr>
<td>M7</td>
<td>Включение воздушного охлаждения</td>
<td>M7</td>
</tr>
<tr>
<td>M8</td>
<td>Включение водяного охлаждения</td>
<td>M8</td>
</tr>
<tr>
<td>M9</td>
<td>Выключение охлаждения</td>
<td>M9</td>
</tr>
<tr>
<td>M30</td>
<td>Завершение УП с перемоткой в начало</td>
<td>M30</td>
</tr>
</tbody>
</table>

        <script>/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./preview-src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/lodash.throttle/index.js":
/*!***********************************************!*\
  !*** ./node_modules/lodash.throttle/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/** Used to match leading and trailing whitespace. */
var reTrim = /^\s+|\s+$/g;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on `root`. */
var freeParseInt = parseInt;

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed `func` invocations and a `flush` method to immediately invoke them.
 * Provide `options` to indicate whether `func` should be invoked on the
 * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last `func`
 * invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time `func` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke `sendMail` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any `maxWait` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        result = wait - timeSinceLastCall;

    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the `maxWait` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have `lastArgs` which means `func` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

/**
 * Creates a throttled function that only invokes `func` at most once per
 * every `wait` milliseconds. The throttled function comes with a `cancel`
 * method to cancel delayed `func` invocations and a `flush` method to
 * immediately invoke them. Provide `options` to indicate whether `func`
 * should be invoked on the leading and/or trailing edge of the `wait`
 * timeout. The `func` is invoked with the last arguments provided to the
 * throttled function. Subsequent calls to the throttled function return the
 * result of the last `func` invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is
 * invoked on the trailing edge of the timeout only if the throttled function
 * is invoked more than once during the `wait` timeout.
 *
 * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
 * until to the next tick, similar to `setTimeout` with a timeout of `0`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between `_.throttle` and `_.debounce`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to throttle.
 * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=true]
 *  Specify invoking on the leading edge of the timeout.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new throttled function.
 * @example
 *
 * // Avoid excessively updating the position while scrolling.
 * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
 *
 * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.
 * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });
 * jQuery(element).on('click', throttled);
 *
 * // Cancel the trailing throttled invocation.
 * jQuery(window).on('popstate', throttled.cancel);
 */
function throttle(func, wait, options) {
  var leading = true,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  if (isObject(options)) {
    leading = 'leading' in options ? !!options.leading : leading;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }
  return debounce(func, wait, {
    'leading': leading,
    'maxWait': wait,
    'trailing': trailing
  });
}

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && objectToString.call(value) == symbolTag);
}

/**
 * Converts `value` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = value.replace(reTrim, '');
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = throttle;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1, eval)("this");
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./preview-src/activeLineMarker.ts":
/*!*****************************************!*\
  !*** ./preview-src/activeLineMarker.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
const scroll_sync_1 = __webpack_require__(/*! ./scroll-sync */ "./preview-src/scroll-sync.ts");
class ActiveLineMarker {
    onDidChangeTextEditorSelection(line) {
        const { previous } = scroll_sync_1.getElementsForSourceLine(line);
        this._update(previous && previous.element);
    }
    _update(before) {
        this._unmarkActiveElement(this._current);
        this._markActiveElement(before);
        this._current = before;
    }
    _unmarkActiveElement(element) {
        if (!element) {
            return;
        }
        element.className = element.className.replace(/\bcode-active-line\b/g, '');
    }
    _markActiveElement(element) {
        if (!element) {
            return;
        }
        element.className += ' code-active-line';
    }
}
exports.ActiveLineMarker = ActiveLineMarker;


/***/ }),

/***/ "./preview-src/events.ts":
/*!*******************************!*\
  !*** ./preview-src/events.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
Object.defineProperty(exports, "__esModule", { value: true });
function onceDocumentLoaded(f) {
    if (document.readyState === 'loading' || document.readyState === 'uninitialized') {
        document.addEventListener('DOMContentLoaded', f);
    }
    else {
        f();
    }
}
exports.onceDocumentLoaded = onceDocumentLoaded;


/***/ }),

/***/ "./preview-src/index.ts":
/*!******************************!*\
  !*** ./preview-src/index.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
Object.defineProperty(exports, "__esModule", { value: true });
const activeLineMarker_1 = __webpack_require__(/*! ./activeLineMarker */ "./preview-src/activeLineMarker.ts");
const events_1 = __webpack_require__(/*! ./events */ "./preview-src/events.ts");
const messaging_1 = __webpack_require__(/*! ./messaging */ "./preview-src/messaging.ts");
const scroll_sync_1 = __webpack_require__(/*! ./scroll-sync */ "./preview-src/scroll-sync.ts");
const settings_1 = __webpack_require__(/*! ./settings */ "./preview-src/settings.ts");
const throttle = __webpack_require__(/*! lodash.throttle */ "./node_modules/lodash.throttle/index.js");
let scrollDisabled = true;
const marker = new activeLineMarker_1.ActiveLineMarker();
const settings = settings_1.getSettings();
const vscode = acquireVsCodeApi();
// Set VS Code state
let state = settings_1.getData('data-state');
vscode.setState(state);
const messaging = messaging_1.createPosterForVsCode(vscode);
window.cspAlerter.setPoster(messaging);
window.styleLoadingMonitor.setPoster(messaging);
window.onload = () => {
    updateImageSizes();
};
events_1.onceDocumentLoaded(() => {
    if (settings.scrollPreviewWithEditor) {
        setTimeout(() => {
            const initialLine = +settings.line;
            if (!isNaN(initialLine)) {
                scrollDisabled = true;
                scroll_sync_1.scrollToRevealSourceLine(initialLine);
            }
        }, 0);
    }
});
const onUpdateView = (() => {
    const doScroll = throttle((line) => {
        scrollDisabled = true;
        scroll_sync_1.scrollToRevealSourceLine(line);
    }, 50);
    return (line, settings) => {
        if (!isNaN(line)) {
            settings.line = line;
            doScroll(line);
        }
    };
})();
let updateImageSizes = throttle(() => {
    const imageInfo = [];
    let images = document.getElementsByTagName('img');
    if (images) {
        let i;
        for (i = 0; i < images.length; i++) {
            const img = images[i];
            if (img.classList.contains('loading')) {
                img.classList.remove('loading');
            }
            imageInfo.push({
                id: img.id,
                height: img.height,
                width: img.width
            });
        }
        messaging.postMessage('cacheImageSizes', imageInfo);
    }
}, 50);
window.addEventListener('resize', () => {
    scrollDisabled = true;
    updateImageSizes();
}, true);
window.addEventListener('message', event => {
    if (event.data.source !== settings.source) {
        return;
    }
    switch (event.data.type) {
        case 'onDidChangeTextEditorSelection':
            marker.onDidChangeTextEditorSelection(event.data.line);
            break;
        case 'updateView':
            onUpdateView(event.data.line, settings);
            break;
    }
}, false);
document.addEventListener('dblclick', event => {
    if (!settings.doubleClickToSwitchToEditor) {
        return;
    }
    // Ignore clicks on links
    for (let node = event.target; node; node = node.parentNode) {
        if (node.tagName === 'A') {
            return;
        }
    }
    const offset = event.pageY;
    const line = scroll_sync_1.getEditorLineNumberForPageOffset(offset);
    if (typeof line === 'number' && !isNaN(line)) {
        messaging.postMessage('didClick', { line: Math.floor(line) });
    }
});
document.addEventListener('click', event => {
    if (!event) {
        return;
    }
    let node = event.target;
    while (node) {
        if (node.tagName && node.tagName === 'A' && node.href) {
            if (node.getAttribute('href').startsWith('#')) {
                break;
            }
            if (node.href.startsWith('file://') || node.href.startsWith('vscode-resource:')) {
                const [path, fragment] = node.href.replace(/^(file:\/\/|vscode-resource:)/i, '').split('#');
                messaging.postMessage('clickLink', { path, fragment });
                event.preventDefault();
                event.stopPropagation();
                break;
            }
            break;
        }
        node = node.parentNode;
    }
}, true);
if (settings.scrollEditorWithPreview) {
    window.addEventListener('scroll', throttle(() => {
        if (scrollDisabled) {
            scrollDisabled = false;
        }
        else {
            const line = scroll_sync_1.getEditorLineNumberForPageOffset(window.scrollY);
            if (typeof line === 'number' && !isNaN(line)) {
                messaging.postMessage('revealLine', { line });
                state.line = line;
                vscode.setState(state);
            }
        }
    }, 50));
}


/***/ }),

/***/ "./preview-src/messaging.ts":
/*!**********************************!*\
  !*** ./preview-src/messaging.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
Object.defineProperty(exports, "__esModule", { value: true });
const settings_1 = __webpack_require__(/*! ./settings */ "./preview-src/settings.ts");
exports.createPosterForVsCode = (vscode) => {
    return new class {
        postMessage(type, body) {
            vscode.postMessage({
                type,
                source: settings_1.getSettings().source,
                body
            });
        }
    };
};


/***/ }),

/***/ "./preview-src/scroll-sync.ts":
/*!************************************!*\
  !*** ./preview-src/scroll-sync.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
Object.defineProperty(exports, "__esModule", { value: true });
const settings_1 = __webpack_require__(/*! ./settings */ "./preview-src/settings.ts");
function clamp(min, max, value) {
    return Math.min(max, Math.max(min, value));
}
function clampLine(line) {
    return clamp(0, settings_1.getSettings().lineCount - 1, line);
}
const getCodeLineElements = (() => {
    let elements;
    return () => {
        if (!elements) {
            elements = [{ element: document.body, line: 0 }];
            for (const element of document.getElementsByClassName('code-line')) {
                const line = +element.getAttribute('data-line');
                if (!isNaN(line)) {
                    elements.push({ element: element, line });
                }
            }
        }
        return elements;
    };
})();
/**
 * Find the html elements that map to a specific target line in the editor.
 *
 * If an exact match, returns a single element. If the line is between elements,
 * returns the element prior to and the element after the given line.
 */
function getElementsForSourceLine(targetLine) {
    const lineNumber = Math.floor(targetLine);
    const lines = getCodeLineElements();
    let previous = lines[0] || null;
    for (const entry of lines) {
        if (entry.line === lineNumber) {
            return { previous: entry, next: undefined };
        }
        else if (entry.line > lineNumber) {
            return { previous, next: entry };
        }
        previous = entry;
    }
    return { previous };
}
exports.getElementsForSourceLine = getElementsForSourceLine;
/**
 * Find the html elements that are at a specific pixel offset on the page.
 */
function getLineElementsAtPageOffset(offset) {
    const lines = getCodeLineElements();
    const position = offset - window.scrollY;
    let lo = -1;
    let hi = lines.length - 1;
    while (lo + 1 < hi) {
        const mid = Math.floor((lo + hi) / 2);
        const bounds = lines[mid].element.getBoundingClientRect();
        if (bounds.top + bounds.height >= position) {
            hi = mid;
        }
        else {
            lo = mid;
        }
    }
    const hiElement = lines[hi];
    const hiBounds = hiElement.element.getBoundingClientRect();
    if (hi >= 1 && hiBounds.top > position) {
        const loElement = lines[lo];
        return { previous: loElement, next: hiElement };
    }
    return { previous: hiElement };
}
exports.getLineElementsAtPageOffset = getLineElementsAtPageOffset;
/**
 * Attempt to reveal the element for a source line in the editor.
 */
function scrollToRevealSourceLine(line) {
    if (!settings_1.getSettings().scrollPreviewWithEditor) {
        return;
    }
    if (line <= 0) {
        window.scroll(window.scrollX, 0);
        return;
    }
    const { previous, next } = getElementsForSourceLine(line);
    if (!previous) {
        return;
    }
    let scrollTo = 0;
    const rect = previous.element.getBoundingClientRect();
    const previousTop = rect.top;
    if (next && next.line !== previous.line) {
        // Between two elements. Go to percentage offset between them.
        const betweenProgress = (line - previous.line) / (next.line - previous.line);
        const elementOffset = next.element.getBoundingClientRect().top - previousTop;
        scrollTo = previousTop + betweenProgress * elementOffset;
    }
    else {
        const progressInElement = line - Math.floor(line);
        scrollTo = previousTop + (rect.height * progressInElement);
    }
    window.scroll(window.scrollX, Math.max(1, window.scrollY + scrollTo));
}
exports.scrollToRevealSourceLine = scrollToRevealSourceLine;
function getEditorLineNumberForPageOffset(offset) {
    const { previous, next } = getLineElementsAtPageOffset(offset);
    if (previous) {
        const previousBounds = previous.element.getBoundingClientRect();
        const offsetFromPrevious = (offset - window.scrollY - previousBounds.top);
        if (next) {
            const progressBetweenElements = offsetFromPrevious / (next.element.getBoundingClientRect().top - previousBounds.top);
            const line = previous.line + progressBetweenElements * (next.line - previous.line);
            return clampLine(line);
        }
        else {
            const progressWithinElement = offsetFromPrevious / (previousBounds.height);
            const line = previous.line + progressWithinElement;
            return clampLine(line);
        }
    }
    return null;
}
exports.getEditorLineNumberForPageOffset = getEditorLineNumberForPageOffset;


/***/ }),

/***/ "./preview-src/settings.ts":
/*!*********************************!*\
  !*** ./preview-src/settings.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
Object.defineProperty(exports, "__esModule", { value: true });
let cachedSettings = undefined;
function getData(key) {
    const element = document.getElementById('vscode-markdown-preview-data');
    if (element) {
        const data = element.getAttribute(key);
        if (data) {
            return JSON.parse(data);
        }
    }
    throw new Error(`Could not load data for ${key}`);
}
exports.getData = getData;
function getSettings() {
    if (cachedSettings) {
        return cachedSettings;
    }
    cachedSettings = getData('data-settings');
    if (cachedSettings) {
        return cachedSettings;
    }
    throw new Error('Could not load settings');
}
exports.getSettings = getSettings;


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2xvZGFzaC50aHJvdHRsZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL3ByZXZpZXctc3JjL2FjdGl2ZUxpbmVNYXJrZXIudHMiLCJ3ZWJwYWNrOi8vLy4vcHJldmlldy1zcmMvZXZlbnRzLnRzIiwid2VicGFjazovLy8uL3ByZXZpZXctc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3ByZXZpZXctc3JjL21lc3NhZ2luZy50cyIsIndlYnBhY2s6Ly8vLi9wcmV2aWV3LXNyYy9zY3JvbGwtc3luYy50cyIsIndlYnBhY2s6Ly8vLi9wcmV2aWV3LXNyYy9zZXR0aW5ncy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSx5REFBaUQsY0FBYztBQUMvRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBMkIsMEJBQTBCLEVBQUU7QUFDdkQseUNBQWlDLGVBQWU7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOERBQXNELCtEQUErRDs7QUFFckg7QUFDQTs7O0FBR0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNB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Ozs7Ozs7Ozs7Ozs7QUN2SUQ7OztnR0FHZ0c7O0FBWWhHLElBQUksY0FBYyxHQUFnQyxTQUFTLENBQUM7QUFFNUQsU0FBZ0IsT0FBTyxDQUFDLEdBQVc7SUFDbEMsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0lBQ3hFLElBQUksT0FBTyxFQUFFO1FBQ1osTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN2QyxJQUFJLElBQUksRUFBRTtZQUNULE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUN4QjtLQUNEO0lBRUQsTUFBTSxJQUFJLEtBQUssQ0FBQywyQkFBMkIsR0FBRyxFQUFFLENBQUMsQ0FBQztBQUNuRCxDQUFDO0FBVkQsMEJBVUM7QUFFRCxTQUFnQixXQUFXO0lBQzFCLElBQUksY0FBYyxFQUFFO1FBQ25CLE9BQU8sY0FBYyxDQUFDO0tBQ3RCO0lBRUQsY0FBYyxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUMxQyxJQUFJLGNBQWMsRUFBRTtRQUNuQixPQUFPLGNBQWMsQ0FBQztLQUN0QjtJQUVELE1BQU0sSUFBSSxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQztBQUM1QyxDQUFDO0FBWEQsa0NBV0MiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9wcmV2aWV3LXNyYy9pbmRleC50c1wiKTtcbiIsIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTkFOID0gMCAvIDA7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cbi8qKlxuICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG4gKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDIuNC4wXG4gKiBAY2F0ZWdvcnkgRGF0ZVxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG4gKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG4gKiB9LCBfLm5vdygpKTtcbiAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG4gKi9cbnZhciBub3cgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcbiAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuICogUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlXG4gKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG4gKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50XG4gKiBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYFxuICogaW52b2NhdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG4gKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG4gKiAgVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gQXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eC5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG4gKlxuICogLy8gSW52b2tlIGBzZW5kTWFpbGAgd2hlbiBjbGlja2VkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHMuXG4gKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBFbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzLlxuICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG4gKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIGRlYm91bmNlZCk7XG4gKlxuICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGRlYm91bmNlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsYXN0QXJncyxcbiAgICAgIGxhc3RUaGlzLFxuICAgICAgbWF4V2FpdCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIHRpbWVySWQsXG4gICAgICBsYXN0Q2FsbFRpbWUsXG4gICAgICBsYXN0SW52b2tlVGltZSA9IDAsXG4gICAgICBsZWFkaW5nID0gZmFsc2UsXG4gICAgICBtYXhpbmcgPSBmYWxzZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcbiAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG4gICAgICAgIHRoaXNBcmcgPSBsYXN0VGhpcztcblxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcbiAgICAvLyBSZXNldCBhbnkgYG1heFdhaXRgIHRpbWVyLlxuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG4gICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcbiAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXG4gICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcblxuICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG4gICAgLy8gdHJhaWxpbmcgZWRnZSwgdGhlIHN5c3RlbSB0aW1lIGhhcyBnb25lIGJhY2t3YXJkcyBhbmQgd2UncmUgdHJlYXRpbmdcbiAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG4gICAgcmV0dXJuIChsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCAodGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCkgfHxcbiAgICAgICh0aW1lU2luY2VMYXN0Q2FsbCA8IDApIHx8IChtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0KSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKTtcbiAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuICAgIH1cbiAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcbiAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXG4gICAgLy8gT25seSBpbnZva2UgaWYgd2UgaGF2ZSBgbGFzdEFyZ3NgIHdoaWNoIG1lYW5zIGBmdW5jYCBoYXMgYmVlblxuICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG4gICAgfVxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBpZiAodGltZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgfVxuICAgIGxhc3RJbnZva2VUaW1lID0gMDtcbiAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCksXG4gICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cbiAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgbGFzdENhbGxUaW1lID0gdGltZTtcblxuICAgIGlmIChpc0ludm9raW5nKSB7XG4gICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgICAgaWYgKG1heGluZykge1xuICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICByZXR1cm4gZGVib3VuY2VkO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB0aHJvdHRsZWQgZnVuY3Rpb24gdGhhdCBvbmx5IGludm9rZXMgYGZ1bmNgIGF0IG1vc3Qgb25jZSBwZXJcbiAqIGV2ZXJ5IGB3YWl0YCBtaWxsaXNlY29uZHMuIFRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgXG4gKiBtZXRob2QgdG8gY2FuY2VsIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvXG4gKiBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS4gUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2BcbiAqIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGBcbiAqIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZCB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGVcbiAqIHRocm90dGxlZCBmdW5jdGlvbi4gU3Vic2VxdWVudCBjYWxscyB0byB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHJldHVybiB0aGVcbiAqIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgaW52b2NhdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG4gKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIHRocm90dGxlZCBmdW5jdGlvblxuICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy50aHJvdHRsZWAgYW5kIGBfLmRlYm91bmNlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHRocm90dGxlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHRocm90dGxlIGludm9jYXRpb25zIHRvLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHRocm90dGxlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gQXZvaWQgZXhjZXNzaXZlbHkgdXBkYXRpbmcgdGhlIHBvc2l0aW9uIHdoaWxlIHNjcm9sbGluZy5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdzY3JvbGwnLCBfLnRocm90dGxlKHVwZGF0ZVBvc2l0aW9uLCAxMDApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHJlbmV3VG9rZW5gIHdoZW4gdGhlIGNsaWNrIGV2ZW50IGlzIGZpcmVkLCBidXQgbm90IG1vcmUgdGhhbiBvbmNlIGV2ZXJ5IDUgbWludXRlcy5cbiAqIHZhciB0aHJvdHRsZWQgPSBfLnRocm90dGxlKHJlbmV3VG9rZW4sIDMwMDAwMCwgeyAndHJhaWxpbmcnOiBmYWxzZSB9KTtcbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCB0aHJvdHRsZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgdGhyb3R0bGVkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCB0aHJvdHRsZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGVhZGluZyA9IHRydWUsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgbGVhZGluZyA9ICdsZWFkaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLmxlYWRpbmcgOiBsZWFkaW5nO1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cbiAgcmV0dXJuIGRlYm91bmNlKGZ1bmMsIHdhaXQsIHtcbiAgICAnbGVhZGluZyc6IGxlYWRpbmcsXG4gICAgJ21heFdhaXQnOiB3YWl0LFxuICAgICd0cmFpbGluZyc6IHRyYWlsaW5nXG4gIH0pO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b051bWJlcigzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuICogLy8gPT4gSW5maW5pdHlcbiAqXG4gKiBfLnRvTnVtYmVyKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gTkFOO1xuICB9XG4gIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gIH1cbiAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcbiAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOClcbiAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0aHJvdHRsZTtcbiIsInZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLCBldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2ggKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuIiwiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5pbXBvcnQgeyBnZXRFbGVtZW50c0ZvclNvdXJjZUxpbmUgfSBmcm9tICcuL3Njcm9sbC1zeW5jJztcblxuZXhwb3J0IGNsYXNzIEFjdGl2ZUxpbmVNYXJrZXIge1xuXHRwcml2YXRlIF9jdXJyZW50OiBhbnk7XG5cblx0b25EaWRDaGFuZ2VUZXh0RWRpdG9yU2VsZWN0aW9uKGxpbmU6IG51bWJlcikge1xuXHRcdGNvbnN0IHsgcHJldmlvdXMgfSA9IGdldEVsZW1lbnRzRm9yU291cmNlTGluZShsaW5lKTtcblx0XHR0aGlzLl91cGRhdGUocHJldmlvdXMgJiYgcHJldmlvdXMuZWxlbWVudCk7XG5cdH1cblxuXHRfdXBkYXRlKGJlZm9yZTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQpIHtcblx0XHR0aGlzLl91bm1hcmtBY3RpdmVFbGVtZW50KHRoaXMuX2N1cnJlbnQpO1xuXHRcdHRoaXMuX21hcmtBY3RpdmVFbGVtZW50KGJlZm9yZSk7XG5cdFx0dGhpcy5fY3VycmVudCA9IGJlZm9yZTtcblx0fVxuXG5cdF91bm1hcmtBY3RpdmVFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkKSB7XG5cdFx0aWYgKCFlbGVtZW50KSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZSgvXFxiY29kZS1hY3RpdmUtbGluZVxcYi9nLCAnJyk7XG5cdH1cblxuXHRfbWFya0FjdGl2ZUVsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQpIHtcblx0XHRpZiAoIWVsZW1lbnQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0ZWxlbWVudC5jbGFzc05hbWUgKz0gJyBjb2RlLWFjdGl2ZS1saW5lJztcblx0fVxufSIsIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5leHBvcnQgZnVuY3Rpb24gb25jZURvY3VtZW50TG9hZGVkKGY6ICgpID0+IHZvaWQpIHtcblx0aWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJyB8fCBkb2N1bWVudC5yZWFkeVN0YXRlIGFzIHN0cmluZyA9PT0gJ3VuaW5pdGlhbGl6ZWQnKSB7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGYpO1xuXHR9IGVsc2Uge1xuXHRcdGYoKTtcblx0fVxufSIsIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBBY3RpdmVMaW5lTWFya2VyIH0gZnJvbSAnLi9hY3RpdmVMaW5lTWFya2VyJztcbmltcG9ydCB7IG9uY2VEb2N1bWVudExvYWRlZCB9IGZyb20gJy4vZXZlbnRzJztcbmltcG9ydCB7IGNyZWF0ZVBvc3RlckZvclZzQ29kZSB9IGZyb20gJy4vbWVzc2FnaW5nJztcbmltcG9ydCB7IGdldEVkaXRvckxpbmVOdW1iZXJGb3JQYWdlT2Zmc2V0LCBzY3JvbGxUb1JldmVhbFNvdXJjZUxpbmUgfSBmcm9tICcuL3Njcm9sbC1zeW5jJztcbmltcG9ydCB7IGdldFNldHRpbmdzLCBnZXREYXRhIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgdGhyb3R0bGUgPSByZXF1aXJlKCdsb2Rhc2gudGhyb3R0bGUnKTtcblxuZGVjbGFyZSB2YXIgYWNxdWlyZVZzQ29kZUFwaTogYW55O1xuXG5sZXQgc2Nyb2xsRGlzYWJsZWQgPSB0cnVlO1xuY29uc3QgbWFya2VyID0gbmV3IEFjdGl2ZUxpbmVNYXJrZXIoKTtcbmNvbnN0IHNldHRpbmdzID0gZ2V0U2V0dGluZ3MoKTtcblxuY29uc3QgdnNjb2RlID0gYWNxdWlyZVZzQ29kZUFwaSgpO1xuXG4vLyBTZXQgVlMgQ29kZSBzdGF0ZVxubGV0IHN0YXRlID0gZ2V0RGF0YSgnZGF0YS1zdGF0ZScpO1xudnNjb2RlLnNldFN0YXRlKHN0YXRlKTtcblxuY29uc3QgbWVzc2FnaW5nID0gY3JlYXRlUG9zdGVyRm9yVnNDb2RlKHZzY29kZSk7XG5cbndpbmRvdy5jc3BBbGVydGVyLnNldFBvc3RlcihtZXNzYWdpbmcpO1xud2luZG93LnN0eWxlTG9hZGluZ01vbml0b3Iuc2V0UG9zdGVyKG1lc3NhZ2luZyk7XG5cbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG5cdHVwZGF0ZUltYWdlU2l6ZXMoKTtcbn07XG5cbm9uY2VEb2N1bWVudExvYWRlZCgoKSA9PiB7XG5cdGlmIChzZXR0aW5ncy5zY3JvbGxQcmV2aWV3V2l0aEVkaXRvcikge1xuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0Y29uc3QgaW5pdGlhbExpbmUgPSArc2V0dGluZ3MubGluZTtcblx0XHRcdGlmICghaXNOYU4oaW5pdGlhbExpbmUpKSB7XG5cdFx0XHRcdHNjcm9sbERpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0c2Nyb2xsVG9SZXZlYWxTb3VyY2VMaW5lKGluaXRpYWxMaW5lKTtcblx0XHRcdH1cblx0XHR9LCAwKTtcblx0fVxufSk7XG5cbmNvbnN0IG9uVXBkYXRlVmlldyA9ICgoKSA9PiB7XG5cdGNvbnN0IGRvU2Nyb2xsID0gdGhyb3R0bGUoKGxpbmU6IG51bWJlcikgPT4ge1xuXHRcdHNjcm9sbERpc2FibGVkID0gdHJ1ZTtcblx0XHRzY3JvbGxUb1JldmVhbFNvdXJjZUxpbmUobGluZSk7XG5cdH0sIDUwKTtcblxuXHRyZXR1cm4gKGxpbmU6IG51bWJlciwgc2V0dGluZ3M6IGFueSkgPT4ge1xuXHRcdGlmICghaXNOYU4obGluZSkpIHtcblx0XHRcdHNldHRpbmdzLmxpbmUgPSBsaW5lO1xuXHRcdFx0ZG9TY3JvbGwobGluZSk7XG5cdFx0fVxuXHR9O1xufSkoKTtcblxubGV0IHVwZGF0ZUltYWdlU2l6ZXMgPSB0aHJvdHRsZSgoKSA9PiB7XG5cdGNvbnN0IGltYWdlSW5mbzogeyBpZDogc3RyaW5nLCBoZWlnaHQ6IG51bWJlciwgd2lkdGg6IG51bWJlciB9W10gPSBbXTtcblx0bGV0IGltYWdlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbWcnKTtcblx0aWYgKGltYWdlcykge1xuXHRcdGxldCBpO1xuXHRcdGZvciAoaSA9IDA7IGkgPCBpbWFnZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGltZyA9IGltYWdlc1tpXTtcblxuXHRcdFx0aWYgKGltZy5jbGFzc0xpc3QuY29udGFpbnMoJ2xvYWRpbmcnKSkge1xuXHRcdFx0XHRpbWcuY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGluZycpO1xuXHRcdFx0fVxuXG5cdFx0XHRpbWFnZUluZm8ucHVzaCh7XG5cdFx0XHRcdGlkOiBpbWcuaWQsXG5cdFx0XHRcdGhlaWdodDogaW1nLmhlaWdodCxcblx0XHRcdFx0d2lkdGg6IGltZy53aWR0aFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0bWVzc2FnaW5nLnBvc3RNZXNzYWdlKCdjYWNoZUltYWdlU2l6ZXMnLCBpbWFnZUluZm8pO1xuXHR9XG59LCA1MCk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG5cdHNjcm9sbERpc2FibGVkID0gdHJ1ZTtcblx0dXBkYXRlSW1hZ2VTaXplcygpO1xufSwgdHJ1ZSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZXZlbnQgPT4ge1xuXHRpZiAoZXZlbnQuZGF0YS5zb3VyY2UgIT09IHNldHRpbmdzLnNvdXJjZSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHN3aXRjaCAoZXZlbnQuZGF0YS50eXBlKSB7XG5cdFx0Y2FzZSAnb25EaWRDaGFuZ2VUZXh0RWRpdG9yU2VsZWN0aW9uJzpcblx0XHRcdG1hcmtlci5vbkRpZENoYW5nZVRleHRFZGl0b3JTZWxlY3Rpb24oZXZlbnQuZGF0YS5saW5lKTtcblx0XHRcdGJyZWFrO1xuXG5cdFx0Y2FzZSAndXBkYXRlVmlldyc6XG5cdFx0XHRvblVwZGF0ZVZpZXcoZXZlbnQuZGF0YS5saW5lLCBzZXR0aW5ncyk7XG5cdFx0XHRicmVhaztcblx0fVxufSwgZmFsc2UpO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGV2ZW50ID0+IHtcblx0aWYgKCFzZXR0aW5ncy5kb3VibGVDbGlja1RvU3dpdGNoVG9FZGl0b3IpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBJZ25vcmUgY2xpY2tzIG9uIGxpbmtzXG5cdGZvciAobGV0IG5vZGUgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7IG5vZGU7IG5vZGUgPSBub2RlLnBhcmVudE5vZGUgYXMgSFRNTEVsZW1lbnQpIHtcblx0XHRpZiAobm9kZS50YWdOYW1lID09PSAnQScpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH1cblxuXHRjb25zdCBvZmZzZXQgPSBldmVudC5wYWdlWTtcblx0Y29uc3QgbGluZSA9IGdldEVkaXRvckxpbmVOdW1iZXJGb3JQYWdlT2Zmc2V0KG9mZnNldCk7XG5cdGlmICh0eXBlb2YgbGluZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKGxpbmUpKSB7XG5cdFx0bWVzc2FnaW5nLnBvc3RNZXNzYWdlKCdkaWRDbGljaycsIHsgbGluZTogTWF0aC5mbG9vcihsaW5lKSB9KTtcblx0fVxufSk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuXHRpZiAoIWV2ZW50KSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0bGV0IG5vZGU6IGFueSA9IGV2ZW50LnRhcmdldDtcblx0d2hpbGUgKG5vZGUpIHtcblx0XHRpZiAobm9kZS50YWdOYW1lICYmIG5vZGUudGFnTmFtZSA9PT0gJ0EnICYmIG5vZGUuaHJlZikge1xuXHRcdFx0aWYgKG5vZGUuZ2V0QXR0cmlidXRlKCdocmVmJykuc3RhcnRzV2l0aCgnIycpKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG5vZGUuaHJlZi5zdGFydHNXaXRoKCdmaWxlOi8vJykgfHwgbm9kZS5ocmVmLnN0YXJ0c1dpdGgoJ3ZzY29kZS1yZXNvdXJjZTonKSkge1xuXHRcdFx0XHRjb25zdCBbcGF0aCwgZnJhZ21lbnRdID0gbm9kZS5ocmVmLnJlcGxhY2UoL14oZmlsZTpcXC9cXC98dnNjb2RlLXJlc291cmNlOikvaSwgJycpLnNwbGl0KCcjJyk7XG5cdFx0XHRcdG1lc3NhZ2luZy5wb3N0TWVzc2FnZSgnY2xpY2tMaW5rJywgeyBwYXRoLCBmcmFnbWVudCB9KTtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG5cdH1cbn0sIHRydWUpO1xuXG5pZiAoc2V0dGluZ3Muc2Nyb2xsRWRpdG9yV2l0aFByZXZpZXcpIHtcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRocm90dGxlKCgpID0+IHtcblx0XHRpZiAoc2Nyb2xsRGlzYWJsZWQpIHtcblx0XHRcdHNjcm9sbERpc2FibGVkID0gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGxpbmUgPSBnZXRFZGl0b3JMaW5lTnVtYmVyRm9yUGFnZU9mZnNldCh3aW5kb3cuc2Nyb2xsWSk7XG5cdFx0XHRpZiAodHlwZW9mIGxpbmUgPT09ICdudW1iZXInICYmICFpc05hTihsaW5lKSkge1xuXHRcdFx0XHRtZXNzYWdpbmcucG9zdE1lc3NhZ2UoJ3JldmVhbExpbmUnLCB7IGxpbmUgfSk7XG5cdFx0XHRcdHN0YXRlLmxpbmUgPSBsaW5lO1xuXHRcdFx0XHR2c2NvZGUuc2V0U3RhdGUoc3RhdGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSwgNTApKTtcbn0iLCIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgZ2V0U2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmdzJztcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlUG9zdGVyIHtcblx0LyoqXG5cdCAqIFBvc3QgYSBtZXNzYWdlIHRvIHRoZSBtYXJrZG93biBleHRlbnNpb25cblx0ICovXG5cdHBvc3RNZXNzYWdlKHR5cGU6IHN0cmluZywgYm9keTogb2JqZWN0KTogdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBvc3RlckZvclZzQ29kZSA9ICh2c2NvZGU6IGFueSkgPT4ge1xuXHRyZXR1cm4gbmV3IGNsYXNzIGltcGxlbWVudHMgTWVzc2FnZVBvc3RlciB7XG5cdFx0cG9zdE1lc3NhZ2UodHlwZTogc3RyaW5nLCBib2R5OiBvYmplY3QpOiB2b2lkIHtcblx0XHRcdHZzY29kZS5wb3N0TWVzc2FnZSh7XG5cdFx0XHRcdHR5cGUsXG5cdFx0XHRcdHNvdXJjZTogZ2V0U2V0dGluZ3MoKS5zb3VyY2UsXG5cdFx0XHRcdGJvZHlcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcbn07XG5cbiIsIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBnZXRTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuXG5cbmZ1bmN0aW9uIGNsYW1wKG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgdmFsdWU6IG51bWJlcikge1xuXHRyZXR1cm4gTWF0aC5taW4obWF4LCBNYXRoLm1heChtaW4sIHZhbHVlKSk7XG59XG5cbmZ1bmN0aW9uIGNsYW1wTGluZShsaW5lOiBudW1iZXIpIHtcblx0cmV0dXJuIGNsYW1wKDAsIGdldFNldHRpbmdzKCkubGluZUNvdW50IC0gMSwgbGluZSk7XG59XG5cblxuZXhwb3J0IGludGVyZmFjZSBDb2RlTGluZUVsZW1lbnQge1xuXHRlbGVtZW50OiBIVE1MRWxlbWVudDtcblx0bGluZTogbnVtYmVyO1xufVxuXG5jb25zdCBnZXRDb2RlTGluZUVsZW1lbnRzID0gKCgpID0+IHtcblx0bGV0IGVsZW1lbnRzOiBDb2RlTGluZUVsZW1lbnRbXTtcblx0cmV0dXJuICgpID0+IHtcblx0XHRpZiAoIWVsZW1lbnRzKSB7XG5cdFx0XHRlbGVtZW50cyA9IFt7IGVsZW1lbnQ6IGRvY3VtZW50LmJvZHksIGxpbmU6IDAgfV07XG5cdFx0XHRmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY29kZS1saW5lJykpIHtcblx0XHRcdFx0Y29uc3QgbGluZSA9ICtlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1saW5lJykhO1xuXHRcdFx0XHRpZiAoIWlzTmFOKGxpbmUpKSB7XG5cdFx0XHRcdFx0ZWxlbWVudHMucHVzaCh7IGVsZW1lbnQ6IGVsZW1lbnQgYXMgSFRNTEVsZW1lbnQsIGxpbmUgfSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGVsZW1lbnRzO1xuXHR9O1xufSkoKTtcblxuLyoqXG4gKiBGaW5kIHRoZSBodG1sIGVsZW1lbnRzIHRoYXQgbWFwIHRvIGEgc3BlY2lmaWMgdGFyZ2V0IGxpbmUgaW4gdGhlIGVkaXRvci5cbiAqXG4gKiBJZiBhbiBleGFjdCBtYXRjaCwgcmV0dXJucyBhIHNpbmdsZSBlbGVtZW50LiBJZiB0aGUgbGluZSBpcyBiZXR3ZWVuIGVsZW1lbnRzLFxuICogcmV0dXJucyB0aGUgZWxlbWVudCBwcmlvciB0byBhbmQgdGhlIGVsZW1lbnQgYWZ0ZXIgdGhlIGdpdmVuIGxpbmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50c0ZvclNvdXJjZUxpbmUodGFyZ2V0TGluZTogbnVtYmVyKTogeyBwcmV2aW91czogQ29kZUxpbmVFbGVtZW50OyBuZXh0PzogQ29kZUxpbmVFbGVtZW50OyB9IHtcblx0Y29uc3QgbGluZU51bWJlciA9IE1hdGguZmxvb3IodGFyZ2V0TGluZSk7XG5cdGNvbnN0IGxpbmVzID0gZ2V0Q29kZUxpbmVFbGVtZW50cygpO1xuXHRsZXQgcHJldmlvdXMgPSBsaW5lc1swXSB8fCBudWxsO1xuXHRmb3IgKGNvbnN0IGVudHJ5IG9mIGxpbmVzKSB7XG5cdFx0aWYgKGVudHJ5LmxpbmUgPT09IGxpbmVOdW1iZXIpIHtcblx0XHRcdHJldHVybiB7IHByZXZpb3VzOiBlbnRyeSwgbmV4dDogdW5kZWZpbmVkIH07XG5cdFx0fSBlbHNlIGlmIChlbnRyeS5saW5lID4gbGluZU51bWJlcikge1xuXHRcdFx0cmV0dXJuIHsgcHJldmlvdXMsIG5leHQ6IGVudHJ5IH07XG5cdFx0fVxuXHRcdHByZXZpb3VzID0gZW50cnk7XG5cdH1cblx0cmV0dXJuIHsgcHJldmlvdXMgfTtcbn1cblxuLyoqXG4gKiBGaW5kIHRoZSBodG1sIGVsZW1lbnRzIHRoYXQgYXJlIGF0IGEgc3BlY2lmaWMgcGl4ZWwgb2Zmc2V0IG9uIHRoZSBwYWdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGluZUVsZW1lbnRzQXRQYWdlT2Zmc2V0KG9mZnNldDogbnVtYmVyKTogeyBwcmV2aW91czogQ29kZUxpbmVFbGVtZW50OyBuZXh0PzogQ29kZUxpbmVFbGVtZW50OyB9IHtcblx0Y29uc3QgbGluZXMgPSBnZXRDb2RlTGluZUVsZW1lbnRzKCk7XG5cdGNvbnN0IHBvc2l0aW9uID0gb2Zmc2V0IC0gd2luZG93LnNjcm9sbFk7XG5cdGxldCBsbyA9IC0xO1xuXHRsZXQgaGkgPSBsaW5lcy5sZW5ndGggLSAxO1xuXHR3aGlsZSAobG8gKyAxIDwgaGkpIHtcblx0XHRjb25zdCBtaWQgPSBNYXRoLmZsb29yKChsbyArIGhpKSAvIDIpO1xuXHRcdGNvbnN0IGJvdW5kcyA9IGxpbmVzW21pZF0uZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRpZiAoYm91bmRzLnRvcCArIGJvdW5kcy5oZWlnaHQgPj0gcG9zaXRpb24pIHtcblx0XHRcdGhpID0gbWlkO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGxvID0gbWlkO1xuXHRcdH1cblx0fVxuXHRjb25zdCBoaUVsZW1lbnQgPSBsaW5lc1toaV07XG5cdGNvbnN0IGhpQm91bmRzID0gaGlFbGVtZW50LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdGlmIChoaSA+PSAxICYmIGhpQm91bmRzLnRvcCA+IHBvc2l0aW9uKSB7XG5cdFx0Y29uc3QgbG9FbGVtZW50ID0gbGluZXNbbG9dO1xuXHRcdHJldHVybiB7IHByZXZpb3VzOiBsb0VsZW1lbnQsIG5leHQ6IGhpRWxlbWVudCB9O1xuXHR9XG5cdHJldHVybiB7IHByZXZpb3VzOiBoaUVsZW1lbnQgfTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0IHRvIHJldmVhbCB0aGUgZWxlbWVudCBmb3IgYSBzb3VyY2UgbGluZSBpbiB0aGUgZWRpdG9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2Nyb2xsVG9SZXZlYWxTb3VyY2VMaW5lKGxpbmU6IG51bWJlcikge1xuXHRpZiAoIWdldFNldHRpbmdzKCkuc2Nyb2xsUHJldmlld1dpdGhFZGl0b3IpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRpZiAobGluZSA8PSAwKSB7XG5cdFx0d2luZG93LnNjcm9sbCh3aW5kb3cuc2Nyb2xsWCwgMCk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgeyBwcmV2aW91cywgbmV4dCB9ID0gZ2V0RWxlbWVudHNGb3JTb3VyY2VMaW5lKGxpbmUpO1xuXHRpZiAoIXByZXZpb3VzKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGxldCBzY3JvbGxUbyA9IDA7XG5cdGNvbnN0IHJlY3QgPSBwcmV2aW91cy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRjb25zdCBwcmV2aW91c1RvcCA9IHJlY3QudG9wO1xuXHRpZiAobmV4dCAmJiBuZXh0LmxpbmUgIT09IHByZXZpb3VzLmxpbmUpIHtcblx0XHQvLyBCZXR3ZWVuIHR3byBlbGVtZW50cy4gR28gdG8gcGVyY2VudGFnZSBvZmZzZXQgYmV0d2VlbiB0aGVtLlxuXHRcdGNvbnN0IGJldHdlZW5Qcm9ncmVzcyA9IChsaW5lIC0gcHJldmlvdXMubGluZSkgLyAobmV4dC5saW5lIC0gcHJldmlvdXMubGluZSk7XG5cdFx0Y29uc3QgZWxlbWVudE9mZnNldCA9IG5leHQuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBwcmV2aW91c1RvcDtcblx0XHRzY3JvbGxUbyA9IHByZXZpb3VzVG9wICsgYmV0d2VlblByb2dyZXNzICogZWxlbWVudE9mZnNldDtcblx0fSBlbHNlIHtcblx0XHRjb25zdCBwcm9ncmVzc0luRWxlbWVudCA9IGxpbmUgLSBNYXRoLmZsb29yKGxpbmUpO1xuXHRcdHNjcm9sbFRvID0gcHJldmlvdXNUb3AgKyAocmVjdC5oZWlnaHQgKiBwcm9ncmVzc0luRWxlbWVudCk7XG5cdH1cblx0d2luZG93LnNjcm9sbCh3aW5kb3cuc2Nyb2xsWCwgTWF0aC5tYXgoMSwgd2luZG93LnNjcm9sbFkgKyBzY3JvbGxUbykpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWRpdG9yTGluZU51bWJlckZvclBhZ2VPZmZzZXQob2Zmc2V0OiBudW1iZXIpIHtcblx0Y29uc3QgeyBwcmV2aW91cywgbmV4dCB9ID0gZ2V0TGluZUVsZW1lbnRzQXRQYWdlT2Zmc2V0KG9mZnNldCk7XG5cdGlmIChwcmV2aW91cykge1xuXHRcdGNvbnN0IHByZXZpb3VzQm91bmRzID0gcHJldmlvdXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHRjb25zdCBvZmZzZXRGcm9tUHJldmlvdXMgPSAob2Zmc2V0IC0gd2luZG93LnNjcm9sbFkgLSBwcmV2aW91c0JvdW5kcy50b3ApO1xuXHRcdGlmIChuZXh0KSB7XG5cdFx0XHRjb25zdCBwcm9ncmVzc0JldHdlZW5FbGVtZW50cyA9IG9mZnNldEZyb21QcmV2aW91cyAvIChuZXh0LmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gcHJldmlvdXNCb3VuZHMudG9wKTtcblx0XHRcdGNvbnN0IGxpbmUgPSBwcmV2aW91cy5saW5lICsgcHJvZ3Jlc3NCZXR3ZWVuRWxlbWVudHMgKiAobmV4dC5saW5lIC0gcHJldmlvdXMubGluZSk7XG5cdFx0XHRyZXR1cm4gY2xhbXBMaW5lKGxpbmUpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGNvbnN0IHByb2dyZXNzV2l0aGluRWxlbWVudCA9IG9mZnNldEZyb21QcmV2aW91cyAvIChwcmV2aW91c0JvdW5kcy5oZWlnaHQpO1xuXHRcdFx0Y29uc3QgbGluZSA9IHByZXZpb3VzLmxpbmUgKyBwcm9ncmVzc1dpdGhpbkVsZW1lbnQ7XG5cdFx0XHRyZXR1cm4gY2xhbXBMaW5lKGxpbmUpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gbnVsbDtcbn1cbiIsIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5leHBvcnQgaW50ZXJmYWNlIFByZXZpZXdTZXR0aW5ncyB7XG5cdHNvdXJjZTogc3RyaW5nO1xuXHRsaW5lOiBudW1iZXI7XG5cdGxpbmVDb3VudDogbnVtYmVyO1xuXHRzY3JvbGxQcmV2aWV3V2l0aEVkaXRvcj86IGJvb2xlYW47XG5cdHNjcm9sbEVkaXRvcldpdGhQcmV2aWV3OiBib29sZWFuO1xuXHRkaXNhYmxlU2VjdXJpdHlXYXJuaW5nczogYm9vbGVhbjtcblx0ZG91YmxlQ2xpY2tUb1N3aXRjaFRvRWRpdG9yOiBib29sZWFuO1xufVxuXG5sZXQgY2FjaGVkU2V0dGluZ3M6IFByZXZpZXdTZXR0aW5ncyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldERhdGEoa2V5OiBzdHJpbmcpOiBQcmV2aWV3U2V0dGluZ3Mge1xuXHRjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZzY29kZS1tYXJrZG93bi1wcmV2aWV3LWRhdGEnKTtcblx0aWYgKGVsZW1lbnQpIHtcblx0XHRjb25zdCBkYXRhID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoa2V5KTtcblx0XHRpZiAoZGF0YSkge1xuXHRcdFx0cmV0dXJuIEpTT04ucGFyc2UoZGF0YSk7XG5cdFx0fVxuXHR9XG5cblx0dGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgbG9hZCBkYXRhIGZvciAke2tleX1gKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNldHRpbmdzKCk6IFByZXZpZXdTZXR0aW5ncyB7XG5cdGlmIChjYWNoZWRTZXR0aW5ncykge1xuXHRcdHJldHVybiBjYWNoZWRTZXR0aW5ncztcblx0fVxuXG5cdGNhY2hlZFNldHRpbmdzID0gZ2V0RGF0YSgnZGF0YS1zZXR0aW5ncycpO1xuXHRpZiAoY2FjaGVkU2V0dGluZ3MpIHtcblx0XHRyZXR1cm4gY2FjaGVkU2V0dGluZ3M7XG5cdH1cblxuXHR0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBsb2FkIHNldHRpbmdzJyk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9</script>

    </body>
</html>